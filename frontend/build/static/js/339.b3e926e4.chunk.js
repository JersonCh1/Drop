"use strict";(self.webpackChunkdropshipping_frontend=self.webpackChunkdropshipping_frontend||[]).push([[339],{6339:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var r=t(5043),a=t(3216),l=t(5475),d=t(4293),n=t(2339),i=t(579);const c=()=>{const e=(0,a.Zp)(),[s,t]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(1),[b,h]=(0,r.useState)(1),u=(0,r.useCallback)(async()=>{try{var e;o(!0);const s=await d.A.getMyOrders(x,10);t(s.data||[]),h((null===(e=s.pagination)||void 0===e?void 0:e.pages)||1)}catch(s){console.error("Error loading orders:",s),t([]),n.Ay.error(s.message||"Error cargando \xf3rdenes")}finally{o(!1)}},[x]);(0,r.useEffect)(()=>{if(!d.A.isAuthenticated())return n.Ay.error("Debes iniciar sesi\xf3n"),void e("/login");u()},[e,u]);const p=e=>{const s={PENDING:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pendiente"},PROCESSING:{bg:"bg-blue-100",text:"text-blue-800",label:"Procesando"},SHIPPED:{bg:"bg-purple-100",text:"text-purple-800",label:"Enviado"},DELIVERED:{bg:"bg-green-100",text:"text-green-800",label:"Entregado"},CANCELLED:{bg:"bg-red-100",text:"text-red-800",label:"Cancelado"}},t=s[e]||s.PENDING;return(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(t.bg," ").concat(t.text),children:t.label})},g=e=>new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}).format(e);return c?(0,i.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,i.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold",children:"Mis \xd3rdenes"}),(0,i.jsx)(l.N_,{to:"/profile",className:"text-blue-600 hover:text-blue-700 font-medium",children:"\u2190 Volver al Perfil"})]}),0===s.length?(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[(0,i.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udce6"}),(0,i.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"No tienes \xf3rdenes a\xfan"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Comienza a comprar y tus \xf3rdenes aparecer\xe1n aqu\xed"}),(0,i.jsx)(l.N_,{to:"/products",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:"Ver Productos"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"space-y-6",children:s.map(e=>{return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gray-50 px-6 py-4 border-b flex flex-wrap justify-between items-center gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("h3",{className:"text-lg font-bold",children:["Orden #",e.orderNumber]}),p(e.status)]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Fecha: ",(s=e.createdAt,new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}))]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Total"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:g(e.total)})]})]}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h4",{className:"font-semibold mb-2",children:"Productos:"}),(0,i.jsx)("div",{className:"space-y-2",children:e.items.map(e=>(0,i.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium",children:e.productName}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.variantName})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("p",{className:"font-medium",children:[e.quantity," x ",g(e.price)]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["= ",g(e.quantity*e.price)]})]})]},e.id))})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Direcci\xf3n de env\xedo:"}),(0,i.jsx)("p",{className:"font-medium",children:e.shippingAddress})]}),e.trackingCode&&(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"C\xf3digo de rastreo:"}),(0,i.jsx)("p",{className:"font-mono font-medium",children:e.trackingCode})]})]}),e.trackingCode&&(0,i.jsx)(l.N_,{to:"/track/".concat(e.trackingCode),className:"inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"\ud83d\udd0d Rastrear Env\xedo"})]})]},e.id);var s})}),b>1&&(0,i.jsxs)("div",{className:"mt-8 flex justify-center gap-2",children:[(0,i.jsx)("button",{onClick:()=>m(x-1),disabled:1===x,className:"px-4 py-2 border rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"\u2190 Anterior"}),(0,i.jsxs)("span",{className:"px-4 py-2",children:["P\xe1gina ",x," de ",b]}),(0,i.jsx)("button",{onClick:()=>m(x+1),disabled:x===b,className:"px-4 py-2 border rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Siguiente \u2192"})]})]})]})}}}]);
//# sourceMappingURL=339.b3e926e4.chunk.js.map