{"version":3,"file":"static/js/788.fccc28a8.chunk.js","mappings":"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","sources":["pages/LoyaltyPage.tsx"],"sourcesContent":["// frontend/src/pages/LoyaltyPage.tsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport toast from 'react-hot-toast';\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface LoyaltyData {\r\n  points: number;\r\n  totalEarned: number;\r\n  totalSpent: number;\r\n  valueInDollars: string;\r\n  transactions: LoyaltyTransaction[];\r\n  config: {\r\n    PER_DOLLAR: number;\r\n    PER_REVIEW: number;\r\n    PER_REFERRAL: number;\r\n    REDEMPTION_RATE: number;\r\n  };\r\n}\r\n\r\ninterface LoyaltyTransaction {\r\n  id: string;\r\n  points: number;\r\n  type: string;\r\n  description: string;\r\n  createdAt: string;\r\n}\r\n\r\ninterface LeaderboardEntry {\r\n  rank: number;\r\n  name: string;\r\n  totalEarned: number;\r\n  currentPoints: number;\r\n}\r\n\r\nconst LoyaltyPage: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [loyaltyData, setLoyaltyData] = useState<LoyaltyData | null>(null);\r\n  const [leaderboard, setLeaderboard] = useState<LeaderboardEntry[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [redeemAmount, setRedeemAmount] = useState('');\r\n  const [isRedeeming, setIsRedeeming] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      loadLoyaltyData();\r\n      loadLeaderboard();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [user]);\r\n\r\n  const loadLoyaltyData = async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/loyalty/me`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      const data = await response.json();\r\n      setLoyaltyData(data);\r\n    } catch (error) {\r\n      console.error('Error loading loyalty data:', error);\r\n      toast.error('Error al cargar puntos');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadLeaderboard = async () => {\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/loyalty/leaderboard`);\r\n      const data = await response.json();\r\n      setLeaderboard(data.leaderboard || []);\r\n    } catch (error) {\r\n      console.error('Error loading leaderboard:', error);\r\n    }\r\n  };\r\n\r\n  const handleRedeem = async () => {\r\n    const points = parseInt(redeemAmount);\r\n    if (!points || points <= 0) {\r\n      toast.error('Ingresa una cantidad vÃ¡lida');\r\n      return;\r\n    }\r\n\r\n    if (!loyaltyData || points > loyaltyData.points) {\r\n      toast.error('No tienes suficientes puntos');\r\n      return;\r\n    }\r\n\r\n    setIsRedeeming(true);\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const response = await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/loyalty/redeem`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ points })\r\n      });\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        toast.success(data.message);\r\n        setRedeemAmount('');\r\n        loadLoyaltyData();\r\n      } else {\r\n        toast.error(data.error || 'Error al canjear puntos');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error redeeming points:', error);\r\n      toast.error('Error al canjear puntos');\r\n    } finally {\r\n      setIsRedeeming(false);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"bg-white p-8 rounded-xl shadow-md text-center max-w-md\">\r\n          <div className=\"text-6xl mb-4\">ð</div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\r\n            Inicia sesiÃ³n para ver tus puntos\r\n          </h2>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            Accede a tu cuenta para ganar y canjear puntos de lealtad\r\n          </p>\r\n          <Link\r\n            to=\"/login\"\r\n            className=\"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium\"\r\n          >\r\n            Iniciar SesiÃ³n\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n            Programa de Lealtad\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Gana puntos con cada compra y canjÃ©alos por descuentos\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n\r\n          {/* Main Column */}\r\n          <div className=\"lg:col-span-2 space-y-6\">\r\n\r\n            {/* Points Overview */}\r\n            <div className=\"bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl shadow-md p-8 text-white\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <div>\r\n                  <p className=\"text-blue-100 text-sm font-medium mb-1\">Puntos Disponibles</p>\r\n                  <p className=\"text-5xl font-bold\">{loyaltyData?.points || 0}</p>\r\n                </div>\r\n                <div className=\"bg-white bg-opacity-20 rounded-full p-4\">\r\n                  <svg className=\"w-12 h-12\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-3 gap-4 text-center\">\r\n                <div className=\"bg-white bg-opacity-10 rounded-lg p-3\">\r\n                  <p className=\"text-2xl font-bold\">{loyaltyData?.totalEarned || 0}</p>\r\n                  <p className=\"text-xs text-blue-100\">Total Ganado</p>\r\n                </div>\r\n                <div className=\"bg-white bg-opacity-10 rounded-lg p-3\">\r\n                  <p className=\"text-2xl font-bold\">{loyaltyData?.totalSpent || 0}</p>\r\n                  <p className=\"text-xs text-blue-100\">Total Canjeado</p>\r\n                </div>\r\n                <div className=\"bg-white bg-opacity-10 rounded-lg p-3\">\r\n                  <p className=\"text-2xl font-bold\">${loyaltyData?.valueInDollars || '0.00'}</p>\r\n                  <p className=\"text-xs text-blue-100\">Valor en $</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Redeem Points */}\r\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n                Canjear Puntos\r\n              </h2>\r\n              <p className=\"text-gray-600 mb-4\">\r\n                {loyaltyData?.config.REDEMPTION_RATE} puntos = $1.00 de descuento\r\n              </p>\r\n\r\n              <div className=\"flex gap-3\">\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  max={loyaltyData?.points || 0}\r\n                  step=\"100\"\r\n                  value={redeemAmount}\r\n                  onChange={(e) => setRedeemAmount(e.target.value)}\r\n                  placeholder=\"Cantidad de puntos\"\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n                <button\r\n                  onClick={handleRedeem}\r\n                  disabled={isRedeeming || !redeemAmount}\r\n                  className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium\"\r\n                >\r\n                  {isRedeeming ? 'Canjeando...' : 'Canjear'}\r\n                </button>\r\n              </div>\r\n\r\n              {redeemAmount && parseInt(redeemAmount) > 0 && (\r\n                <p className=\"mt-3 text-sm text-gray-600\">\r\n                  RecibirÃ¡s: <span className=\"font-semibold text-green-600\">\r\n                    ${(parseInt(redeemAmount) / (loyaltyData?.config.REDEMPTION_RATE || 100)).toFixed(2)}\r\n                  </span> de descuento\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* How to Earn Points */}\r\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n                Â¿CÃ³mo ganar puntos?\r\n              </h2>\r\n\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-start gap-4 p-4 bg-blue-50 rounded-lg\">\r\n                  <div className=\"bg-blue-600 text-white rounded-full p-2\">\r\n                    <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\r\n                    </svg>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-semibold text-gray-900\">Realizar Compras</p>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      Gana {loyaltyData?.config.PER_DOLLAR} puntos por cada dÃ³lar gastado\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-start gap-4 p-4 bg-green-50 rounded-lg\">\r\n                  <div className=\"bg-green-600 text-white rounded-full p-2\">\r\n                    <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\" />\r\n                    </svg>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-semibold text-gray-900\">Dejar ReseÃ±as</p>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      Gana {loyaltyData?.config.PER_REVIEW} puntos por cada reseÃ±a que dejes\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-start gap-4 p-4 bg-purple-50 rounded-lg\">\r\n                  <div className=\"bg-purple-600 text-white rounded-full p-2\">\r\n                    <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\r\n                    </svg>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-semibold text-gray-900\">Referir Amigos</p>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      Gana {loyaltyData?.config.PER_REFERRAL} puntos cuando un amigo haga su primera compra\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Transaction History */}\r\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n                Historial de Transacciones\r\n              </h2>\r\n\r\n              {loyaltyData?.transactions && loyaltyData.transactions.length > 0 ? (\r\n                <div className=\"space-y-3\">\r\n                  {loyaltyData.transactions.map((transaction) => (\r\n                    <div\r\n                      key={transaction.id}\r\n                      className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\r\n                    >\r\n                      <div>\r\n                        <p className=\"font-medium text-gray-900\">{transaction.description}</p>\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          {new Date(transaction.createdAt).toLocaleDateString('es-PE', {\r\n                            year: 'numeric',\r\n                            month: 'long',\r\n                            day: 'numeric'\r\n                          })}\r\n                        </p>\r\n                      </div>\r\n                      <div className={`text-lg font-bold ${transaction.points > 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                        {transaction.points > 0 ? '+' : ''}{transaction.points}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-center text-gray-500 py-8\">\r\n                  No tienes transacciones aÃºn. Â¡Comienza a ganar puntos!\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Sidebar */}\r\n          <div className=\"space-y-6\">\r\n\r\n            {/* Leaderboard */}\r\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                <span>ð</span>\r\n                Top 10 Miembros\r\n              </h2>\r\n\r\n              {leaderboard.length > 0 ? (\r\n                <div className=\"space-y-3\">\r\n                  {leaderboard.map((entry) => (\r\n                    <div\r\n                      key={entry.rank}\r\n                      className={`flex items-center gap-3 p-3 rounded-lg ${\r\n                        entry.rank <= 3 ? 'bg-gradient-to-r from-yellow-50 to-orange-50' : 'bg-gray-50'\r\n                      }`}\r\n                    >\r\n                      <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-bold ${\r\n                        entry.rank === 1 ? 'bg-yellow-400 text-yellow-900' :\r\n                        entry.rank === 2 ? 'bg-gray-300 text-gray-700' :\r\n                        entry.rank === 3 ? 'bg-orange-400 text-orange-900' :\r\n                        'bg-gray-200 text-gray-600'\r\n                      }`}>\r\n                        {entry.rank}\r\n                      </div>\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <p className=\"font-medium text-gray-900 truncate\">{entry.name}</p>\r\n                        <p className=\"text-xs text-gray-600\">{entry.totalEarned} puntos totales</p>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className=\"font-semibold text-blue-600\">{entry.currentPoints}</p>\r\n                        <p className=\"text-xs text-gray-500\">actuales</p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-center text-gray-500 py-4\">\r\n                  No hay datos disponibles\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <div className=\"bg-white rounded-xl shadow-md p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n                Acciones RÃ¡pidas\r\n              </h2>\r\n\r\n              <div className=\"space-y-3\">\r\n                <Link\r\n                  to=\"/products\"\r\n                  className=\"block w-full bg-blue-600 text-white text-center py-3 rounded-lg hover:bg-blue-700 font-medium transition-colors\"\r\n                >\r\n                  Comprar Productos\r\n                </Link>\r\n                <Link\r\n                  to=\"/orders\"\r\n                  className=\"block w-full bg-gray-100 text-gray-700 text-center py-3 rounded-lg hover:bg-gray-200 font-medium transition-colors\"\r\n                >\r\n                  Ver Mis Pedidos\r\n                </Link>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoyaltyPage;\r\n"],"names":["LoyaltyPage","user","useAuth","loyaltyData","setLoyaltyData","useState","leaderboard","setLeaderboard","loading","setLoading","redeemAmount","setRedeemAmount","isRedeeming","setIsRedeeming","useEffect","loadLoyaltyData","loadLeaderboard","async","token","localStorage","getItem","response","fetch","concat","process","headers","data","json","error","console","toast","_jsx","className","children","_jsxs","points","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","totalEarned","totalSpent","valueInDollars","config","REDEMPTION_RATE","type","min","max","step","value","onChange","e","target","placeholder","onClick","parseInt","method","body","JSON","stringify","ok","success","message","disabled","toFixed","PER_DOLLAR","PER_REVIEW","PER_REFERRAL","transactions","length","map","transaction","description","Date","createdAt","toLocaleDateString","year","month","day","id","entry","rank","name","currentPoints","Link","to"],"sourceRoot":""}