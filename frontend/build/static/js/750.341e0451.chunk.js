"use strict";(self.webpackChunkdropshipping_frontend=self.webpackChunkdropshipping_frontend||[]).push([[750],{6750:(e,s,n)=>{n.r(s),n.d(s,{default:()=>x});var a=n(9379),t=n(5043);const r="https://drop-production-cd2b.up.railway.app/api",c="2.0.0",i="2.0.0";async function l(){const e=Date.now(),s={success:!1,frontend:{version:c,environment:"production",apiUrl:r},versionMatch:!1,latency:0};try{const n=await fetch("".concat(r,"/health"),{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)}),a=Date.now()-e;if(s.latency=a,!n.ok)throw new Error("Backend returned status ".concat(n.status));const t=await n.json();return s.backend=t,s.versionMatch=t.apiVersion===i,s.success="OK"===t.status,s.versionMatch||console.warn("\u26a0\ufe0f Version mismatch! Frontend expects API v".concat(i,", but backend is v").concat(t.apiVersion)),s}catch(n){return s.error=n.message||"Unknown error",s.latency=Date.now()-e,console.error("\u274c Health check failed:",n),s}}async function o(){try{const e=await fetch("".concat(r,"/health/full"),{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!e.ok)throw new Error("Backend returned status ".concat(e.status));return await e.json()}catch(e){return console.error("\u274c Failed to get backend info:",e),null}}async function d(){try{const e=await l();if(!e.success||!e.backend)return{synced:!1,frontendVersion:c,backendVersion:"unknown",message:"No se pudo conectar con el backend"};const s=e.versionMatch;return{synced:s,frontendVersion:c,backendVersion:e.backend.apiVersion,message:s?"\u2705 Frontend y backend sincronizados":"\u26a0\ufe0f Versiones diferentes: Frontend v".concat(c,", Backend v").concat(e.backend.apiVersion)}}catch(e){return{synced:!1,frontendVersion:c,backendVersion:"error",message:e.message||"Error verificando sincronizaci\xf3n"}}}var m=n(579);const x=()=>{var e,s;const[n,r]=(0,t.useState)({loading:!0,basicHealth:null,fullHealth:null,versionSync:null,lastCheck:null}),c=async()=>{r(e=>(0,a.A)((0,a.A)({},e),{},{loading:!0}));try{const[e,s,n]=await Promise.all([l(),o(),d()]);r({loading:!1,basicHealth:e,fullHealth:s,versionSync:n,lastCheck:new Date})}catch(e){console.error("Error running health checks:",e),r(e=>(0,a.A)((0,a.A)({},e),{},{loading:!1}))}};(0,t.useEffect)(()=>{c()},[]);const i=e=>e?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return(0,m.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,m.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,m.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,m.jsxs)("div",{className:"bg-blue-600 px-6 py-4",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-white",children:"System Health Check"}),(0,m.jsx)("p",{className:"text-blue-100 mt-1",children:"Verificaci\xf3n de estado del sistema y sincronizaci\xf3n"})]}),(0,m.jsxs)("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200 flex justify-between items-center",children:[(0,m.jsx)("span",{className:"text-sm text-gray-600",children:n.lastCheck?"\xdaltima verificaci\xf3n: ".concat(n.lastCheck.toLocaleTimeString()):"No verificado"}),(0,m.jsx)("button",{onClick:c,disabled:n.loading,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium transition-colors",children:n.loading?"Verificando...":"Refrescar"})]}),(0,m.jsxs)("div",{className:"p-6 space-y-6",children:[n.loading&&(0,m.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,m.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,m.jsx)("span",{className:"ml-3 text-gray-600",children:"Ejecutando verificaciones..."})]}),!n.loading&&n.versionSync&&(0,m.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,m.jsxs)("h2",{className:"text-lg font-semibold mb-3 flex items-center",children:[(0,m.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Sincronizaci\xf3n de Versiones"]}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Estado:"}),(0,m.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(i(n.versionSync.synced)),children:n.versionSync.synced?"\u2713 Sincronizado":"\u2717 Desincronizado"})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center py-2 bg-gray-50 px-3 rounded",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Frontend:"}),(0,m.jsxs)("span",{className:"font-mono font-medium",children:["v",n.versionSync.frontendVersion]})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center py-2 bg-gray-50 px-3 rounded",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Backend:"}),(0,m.jsxs)("span",{className:"font-mono font-medium",children:["v",n.versionSync.backendVersion]})]}),(0,m.jsx)("p",{className:"text-sm mt-2 ".concat(n.versionSync.synced?"text-green-600":"text-orange-600"),children:n.versionSync.message})]})]}),!n.loading&&n.basicHealth&&(0,m.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,m.jsxs)("h2",{className:"text-lg font-semibold mb-3 flex items-center",children:[(0,m.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Conectividad B\xe1sica"]}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Estado del Backend:"}),(0,m.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(i(n.basicHealth.success)),children:n.basicHealth.success?"\u2713 Online":"\u2717 Offline"})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center py-2 bg-gray-50 px-3 rounded",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Latencia:"}),(0,m.jsxs)("span",{className:"font-medium ".concat(n.basicHealth.latency<500?"text-green-600":n.basicHealth.latency<1e3?"text-yellow-600":"text-red-600"),children:[n.basicHealth.latency,"ms"]})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center py-2 bg-gray-50 px-3 rounded",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"API URL:"}),(0,m.jsx)("span",{className:"font-mono text-sm text-gray-700",children:n.basicHealth.frontend.apiUrl})]}),n.basicHealth.error&&(0,m.jsxs)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:[(0,m.jsx)("strong",{children:"Error:"})," ",n.basicHealth.error]})]})]}),!n.loading&&n.fullHealth&&(0,m.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,m.jsxs)("h2",{className:"text-lg font-semibold mb-3 flex items-center",children:[(0,m.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Servicios del Backend"]}),(0,m.jsxs)("div",{className:"mb-4 grid grid-cols-2 gap-3",children:[(0,m.jsxs)("div",{className:"bg-gray-50 px-3 py-2 rounded",children:[(0,m.jsx)("div",{className:"text-xs text-gray-500",children:"Servicio"}),(0,m.jsx)("div",{className:"font-medium",children:n.fullHealth.service})]}),(0,m.jsxs)("div",{className:"bg-gray-50 px-3 py-2 rounded",children:[(0,m.jsx)("div",{className:"text-xs text-gray-500",children:"Entorno"}),(0,m.jsx)("div",{className:"font-medium capitalize",children:n.fullHealth.environment})]}),(0,m.jsxs)("div",{className:"bg-gray-50 px-3 py-2 rounded",children:[(0,m.jsx)("div",{className:"text-xs text-gray-500",children:"Uptime"}),(0,m.jsxs)("div",{className:"font-medium",children:[Math.floor(n.fullHealth.uptime/60),"m ",Math.floor(n.fullHealth.uptime%60),"s"]})]}),(0,m.jsxs)("div",{className:"bg-gray-50 px-3 py-2 rounded",children:[(0,m.jsx)("div",{className:"text-xs text-gray-500",children:"\xdaltima actualizaci\xf3n"}),(0,m.jsx)("div",{className:"font-medium text-xs",children:new Date(n.fullHealth.timestamp).toLocaleTimeString()})]})]}),n.fullHealth.services&&(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)("h3",{className:"font-medium text-gray-700 mb-2",children:"Estado de Servicios:"}),Object.entries(n.fullHealth.services).map(e=>{let[s,n]=e;const a="connected"===n||!0===n;return(0,m.jsxs)("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded",children:[(0,m.jsxs)("span",{className:"text-gray-700 capitalize",children:[s,":"]}),(0,m.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(i(a)),children:"boolean"===typeof n?n?"\u2713 Configurado":"\u2717 No configurado":"connected"===n?"\u2713 Conectado":"error"===n?"\u2717 Error":String(n)})]},s)})]}),n.fullHealth.database&&(0,m.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:(0,m.jsxs)("div",{className:"flex items-center text-green-800",children:[(0,m.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),(0,m.jsx)("span",{className:"font-medium",children:"Base de datos conectada"})]})})]}),!n.loading&&(0,m.jsxs)("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-4",children:[(0,m.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"\ud83d\udca1 Recomendaciones"}),(0,m.jsxs)("ul",{className:"space-y-1 text-sm text-blue-800",children:[n.versionSync&&!n.versionSync.synced&&(0,m.jsx)("li",{children:"\u2022 Actualiza el frontend o backend para sincronizar las versiones"}),n.basicHealth&&n.basicHealth.latency>1e3&&(0,m.jsx)("li",{children:"\u2022 La latencia es alta (>1s), considera optimizar la conexi\xf3n"}),n.fullHealth&&n.fullHealth.services&&!n.fullHealth.services.database&&(0,m.jsx)("li",{children:"\u2022 La base de datos no est\xe1 conectada, verifica la configuraci\xf3n"}),(!n.basicHealth||!n.basicHealth.success)&&(0,m.jsx)("li",{children:"\u2022 El backend no responde, verifica que est\xe9 en ejecuci\xf3n"}),(null===(e=n.versionSync)||void 0===e?void 0:e.synced)&&(null===(s=n.basicHealth)||void 0===s?void 0:s.success)&&(0,m.jsx)("li",{className:"text-green-700",children:"\u2713 Sistema operando correctamente"})]})]})]})]}),(0,m.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-500",children:[(0,m.jsx)("p",{children:"Esta p\xe1gina verifica la conectividad y sincronizaci\xf3n entre frontend y backend"}),(0,m.jsx)("p",{className:"mt-1",children:"Para soporte t\xe9cnico, revisa los logs de Railway (backend) y Vercel (frontend)"})]})]})})}}}]);
//# sourceMappingURL=750.341e0451.chunk.js.map