"use strict";(self.webpackChunkdropshipping_frontend=self.webpackChunkdropshipping_frontend||[]).push([[436],{1436:(e,r,a)=>{a.r(r),a.d(r,{default:()=>x});var t=a(5043),s=a(5475),o=a(2165),i=a(7513),n=a(2339),l=a(5444),c=a(1972),d=a(579);const g=e=>{let{src:r,alt:a,className:s="",placeholder:o='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="400"%3E%3Crect fill="%23f0f0f0" width="400" height="400"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="20" dy="10.5" font-weight="bold" x="50%25" y="50%25" text-anchor="middle"%3ELoading...%3C/text%3E%3C/svg%3E',onLoad:i,onError:n}=e;const[l,c]=(0,t.useState)(o),[g,h]=(0,t.useState)(!0),[m,u]=(0,t.useState)(!1),x=(0,t.useRef)(null);return(0,t.useEffect)(()=>{let e;const a=x.current;return a&&(e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const t=new Image;t.src=r,t.onload=()=>{c(r),h(!1),null===i||void 0===i||i()},t.onerror=()=>{u(!0),h(!1),c('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="400"%3E%3Crect fill="%23f0f0f0" width="400" height="400"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="20" dy="10.5" font-weight="bold" x="50%25" y="50%25" text-anchor="middle"%3EError%3C/text%3E%3C/svg%3E'),null===n||void 0===n||n()},e.unobserve(a)}})},{rootMargin:"50px",threshold:.01}),e.observe(a)),()=>{e&&a&&e.unobserve(a)}},[r,i,n]),(0,d.jsxs)("div",{className:"relative ".concat(s),children:[(0,d.jsx)("img",{ref:x,src:l,alt:a,className:"transition-opacity duration-300 ".concat(g?"opacity-50":"opacity-100"," ").concat(s)}),g&&(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),m&&(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:(0,d.jsxs)("div",{className:"text-center text-gray-400",children:[(0,d.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,d.jsx)("p",{className:"text-sm",children:"Error al cargar"})]})})]})};var h=a(9379);const m=e=>{let{filters:r,onFilterChange:a,availableCategories:s}=e;const[o,i]=(0,t.useState)(!1),[n,l]=(0,t.useState)(r);(0,t.useEffect)(()=>{l(r)},[r]);const c=()=>{a(n),i(!1)};return(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md mb-6 overflow-hidden",children:[(0,d.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsxs)("div",{className:"flex-1 relative",children:[(0,d.jsx)("input",{type:"text",placeholder:"Buscar productos...",value:n.search,onChange:e=>l((0,h.A)((0,h.A)({},n),{},{search:e.target.value})),onKeyPress:e=>"Enter"===e.key&&c(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),(0,d.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,d.jsxs)("button",{onClick:()=>i(!o),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg font-medium flex items-center gap-2 transition-colors",children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Filtros",(0,d.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(o?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),o&&(0,d.jsxs)("div",{className:"p-6 space-y-6 bg-gray-50 dark:bg-gray-900",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Precio"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:"M\xednimo"}),(0,d.jsx)("input",{type:"number",min:"0",value:n.priceMin,onChange:e=>l((0,h.A)((0,h.A)({},n),{},{priceMin:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:"M\xe1ximo"}),(0,d.jsx)("input",{type:"number",min:"0",value:n.priceMax,onChange:e=>l((0,h.A)((0,h.A)({},n),{},{priceMax:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Calificaci\xf3n m\xednima"}),(0,d.jsx)("div",{className:"space-y-2",children:[5,4,3,2,1].map(e=>(0,d.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,d.jsx)("input",{type:"radio",name:"rating",checked:n.rating===e,onChange:()=>l((0,h.A)((0,h.A)({},n),{},{rating:e})),className:"mr-2"}),(0,d.jsxs)("div",{className:"flex items-center",children:[[...Array(e)].map((e,r)=>(0,d.jsx)("svg",{className:"w-4 h-4 text-yellow-400 fill-current",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{d:"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"})},r)),(0,d.jsx)("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"y m\xe1s"})]})]},e))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Categor\xedas"}),(0,d.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.map(e=>(0,d.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",checked:n.categories.includes(e.id),onChange:()=>(e=>{const r=n.categories.includes(e)?n.categories.filter(r=>r!==e):[...n.categories,e];l((0,h.A)((0,h.A)({},n),{},{categories:r}))})(e.id),className:"mr-2"}),(0,d.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name})]},e.id))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Ordenar por"}),(0,d.jsxs)("select",{value:n.sortBy,onChange:e=>l((0,h.A)((0,h.A)({},n),{},{sortBy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white mb-3",children:[(0,d.jsx)("option",{value:"createdAt",children:"M\xe1s reciente"}),(0,d.jsx)("option",{value:"basePrice",children:"Precio"}),(0,d.jsx)("option",{value:"name",children:"Nombre"}),(0,d.jsx)("option",{value:"stockCount",children:"Stock"})]}),(0,d.jsxs)("select",{value:n.sortOrder,onChange:e=>l((0,h.A)((0,h.A)({},n),{},{sortOrder:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:[(0,d.jsx)("option",{value:"DESC",children:"Descendente"}),(0,d.jsx)("option",{value:"ASC",children:"Ascendente"})]})]})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("button",{onClick:()=>{const e={search:"",priceMin:0,priceMax:1e3,rating:0,categories:[],sortBy:"createdAt",sortOrder:"DESC"};l(e),a(e)},className:"px-6 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg font-medium transition-colors",children:"Limpiar filtros"}),(0,d.jsx)("button",{onClick:c,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Aplicar filtros"})]})]})]})},u=e=>{let{product:r,onAddToCart:a}=e;const t=o.A.getMainImage(r),i=o.A.getLowestPrice(r),n=o.A.isAvailable(r);return(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300 group",children:[(0,d.jsx)(s.N_,{to:"/products/".concat(r.slug),children:(0,d.jsxs)("div",{className:"relative aspect-square bg-gray-100",children:[(0,d.jsx)(g,{src:t,alt:r.name,className:"w-full h-full object-cover"}),(0,d.jsxs)("div",{className:"absolute top-2 left-2 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,d.jsx)(l.A,{productId:r.id,variant:"icon",size:"md"}),(0,d.jsx)(c.A,{product:r,variant:"icon",size:"md"})]}),r.isFeatured&&(0,d.jsx)("div",{className:"absolute top-2 right-2 bg-yellow-400 text-yellow-900 px-2 py-1 rounded-md text-xs font-semibold",children:"\u2b50 Destacado"}),!n&&(0,d.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,d.jsx)("span",{className:"bg-red-600 text-white px-4 py-2 rounded-md font-semibold",children:"Agotado"})})]})}),(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsx)(s.N_,{to:"/products/".concat(r.slug),children:(0,d.jsx)("h3",{className:"font-semibold text-lg text-gray-900 mb-2 hover:text-blue-600 transition-colors",children:r.name})}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:r.description||"Carcasa de alta calidad para tu iPhone"}),r.compatibility&&(()=>{try{const e="string"===typeof r.compatibility?JSON.parse(r.compatibility):r.compatibility;if(Array.isArray(e)&&e.length>0)return(0,d.jsx)("div",{className:"mb-3",children:(0,d.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.slice(0,2).map(e=>(0,d.jsx)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:e},e)),e.length>2&&(0,d.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:["+",e.length-2]})]})})}catch(e){return null}return null})(),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:["$",i.toFixed(2)]}),r.variants.length>0&&(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:[r.variants.length," variantes"]})]}),(0,d.jsx)("button",{onClick:()=>a(r),disabled:!n,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm font-medium",children:n?"Agregar":"Agotado"})]})]})]})},x=()=>{var e;const[r,a]=(0,s.ok)(),{addItem:l}=(0,i._$)(),[c,g]=(0,t.useState)([]),[h,x]=(0,t.useState)(!0),[p,b]=(0,t.useState)([]),[v,y]=(0,t.useState)({page:1,limit:12,total:0,pages:0}),[f,j]=(0,t.useState)({search:r.get("search")||"",priceMin:Number(r.get("priceMin"))||0,priceMax:Number(r.get("priceMax"))||1e3,rating:Number(r.get("rating"))||0,categories:(null===(e=r.get("categories"))||void 0===e?void 0:e.split(","))||[],sortBy:r.get("sortBy")||"createdAt",sortOrder:r.get("sortOrder")||"DESC"});(0,t.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat("https://drop-production-cd2b.up.railway.app/api","/api/categories")),r=await e.json();r.success&&b(r.data.map(e=>({id:e.id,name:e.name})))}catch(e){console.error("Error loading categories:",e)}})()},[]);const w=(0,t.useCallback)(async()=>{x(!0);try{var e,a,t,s;const i=parseInt(r.get("page")||"1"),n=await o.A.getProducts({page:i,limit:v.limit,search:f.search||void 0,categories:f.categories.length>0?f.categories:void 0,priceMin:f.priceMin>0?f.priceMin:void 0,priceMax:f.priceMax<1e3?f.priceMax:void 0,rating:f.rating>0?f.rating:void 0,sortBy:f.sortBy,sortOrder:f.sortOrder});g(n.data),y({page:(null===(e=n.pagination)||void 0===e?void 0:e.page)||1,limit:(null===(a=n.pagination)||void 0===a?void 0:a.limit)||12,total:(null===(t=n.pagination)||void 0===t?void 0:t.total)||0,pages:(null===(s=n.pagination)||void 0===s?void 0:s.pages)||0})}catch(i){console.error("Error loading products:",i),n.Ay.error("Error al cargar productos")}finally{x(!1)}},[r,v.limit,f]);(0,t.useEffect)(()=>{w()},[w]),(0,t.useEffect)(()=>{const e=()=>{"visible"===document.visibilityState&&w()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[w]);const k=e=>{const t=new URLSearchParams(r);t.set("page",e.toString()),a(t),window.scrollTo(0,0)},N=e=>{var r,a;const t=o.A.getLowestPrice(e),s=o.A.getMainImage(e);l({id:e.id,productId:parseInt(e.id.replace(/[^0-9]/g,""))||1,name:e.name,price:t,model:e.model||"Universal",color:(null===(r=e.variants[0])||void 0===r?void 0:r.color)||"Default",quantity:1,image:s,sku:(null===(a=e.variants[0])||void 0===a?void 0:a.sku)||e.slug,maxQuantity:e.stockCount})};return(0,d.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Todos los Productos"}),(0,d.jsxs)("p",{className:"text-gray-600",children:[v.total," productos disponibles"]})]}),(0,d.jsx)(m,{filters:f,onFilterChange:e=>{j(e);const r=new URLSearchParams;r.set("page","1"),e.search&&r.set("search",e.search),e.priceMin>0&&r.set("priceMin",e.priceMin.toString()),e.priceMax<1e3&&r.set("priceMax",e.priceMax.toString()),e.rating>0&&r.set("rating",e.rating.toString()),e.categories.length>0&&r.set("categories",e.categories.join(",")),e.sortBy&&r.set("sortBy",e.sortBy),e.sortOrder&&r.set("sortOrder",e.sortOrder),a(r)},availableCategories:p}),h&&(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,d.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando productos..."})]}),!h&&c.length>0&&(0,d.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:c.map(e=>(0,d.jsx)(u,{product:e,onAddToCart:N},e.id))}),!h&&0===c.length&&(0,d.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg",children:[(0,d.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd0d"}),(0,d.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No se encontraron productos"}),(0,d.jsx)("p",{className:"text-gray-600 mb-6",children:"Intenta ajustar los filtros o buscar con otros t\xe9rminos"}),(0,d.jsx)("button",{onClick:()=>{j({search:"",priceMin:0,priceMax:1e3,rating:0,categories:[],sortBy:"createdAt",sortOrder:"DESC"}),a(new URLSearchParams)},className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700",children:"Limpiar filtros"})]}),!h&&v.pages>1&&(0,d.jsxs)("div",{className:"mt-8 flex justify-center items-center space-x-2",children:[(0,d.jsx)("button",{onClick:()=>k(v.page-1),disabled:1===v.page,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),Array.from({length:Math.min(5,v.pages)},(e,r)=>{let a;return a=v.pages<=5||v.page<=3?r+1:v.page>=v.pages-2?v.pages-4+r:v.page-2+r,(0,d.jsx)("button",{onClick:()=>k(a),className:"px-4 py-2 border rounded-md ".concat(v.page===a?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"),children:a},a)}),(0,d.jsx)("button",{onClick:()=>k(v.page+1),disabled:v.page===v.pages,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})})}},1972:(e,r,a)=>{a.d(r,{A:()=>i});a(5043);var t=a(2622),s=a(2339),o=a(579);const i=e=>{let{product:r,variant:a="icon",size:i="md",className:n=""}=e;const{addToCompare:l,removeFromCompare:c,isInCompare:d,compareProducts:g}=(0,t.f)(),h=d(r.id),m=e=>{if(e.preventDefault(),e.stopPropagation(),h)c(r.id),s.Ay.success("Eliminado del comparador");else{if(g.length>=4)return void s.Ay.error("M\xe1ximo 4 productos para comparar");l(r),s.Ay.success("A\xf1adido al comparador")}},u={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"},x={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return"icon"===a?(0,o.jsx)("button",{onClick:m,className:"".concat(u[i]," flex items-center justify-center rounded-full transition-all duration-300 ").concat(h?"bg-blue-500 text-white hover:bg-blue-600":"bg-white text-gray-600 hover:bg-blue-50 hover:text-blue-500"," hover:scale-110 shadow-md ").concat(n),"aria-label":h?"Eliminar del comparador":"A\xf1adir al comparador",children:(0,o.jsx)("svg",{className:x[i],fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}):(0,o.jsxs)("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 ".concat(h?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-700 hover:bg-blue-50 hover:text-blue-500"," ").concat(n),children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,o.jsx)("span",{children:h?"En comparador":"Comparar"})]})}},4401:(e,r,a)=>{a.d(r,{A:()=>o});var t=a(9722);const s="https://drop-production-cd2b.up.railway.app/api";const o=new class{getAuthToken(){return localStorage.getItem("token")}async getWishlist(){const e=this.getAuthToken();if(!e)throw new Error("No autenticado");return(await t.A.get("".concat(s,"/wishlist"),{headers:{Authorization:"Bearer ".concat(e)}})).data.wishlist}async addToWishlist(e){const r=this.getAuthToken();if(!r)throw new Error("Debes iniciar sesi\xf3n para a\xf1adir a favoritos");await t.A.post("".concat(s,"/wishlist/add"),{productId:e},{headers:{Authorization:"Bearer ".concat(r)}})}async removeFromWishlist(e){const r=this.getAuthToken();if(!r)throw new Error("No autenticado");await t.A.delete("".concat(s,"/wishlist/").concat(e),{headers:{Authorization:"Bearer ".concat(r)}})}async checkInWishlist(e){const r=this.getAuthToken();if(!r)return!1;try{return(await t.A.get("".concat(s,"/wishlist/check/").concat(e),{headers:{Authorization:"Bearer ".concat(r)}})).data.inWishlist}catch(a){return!1}}async getWishlistCount(){const e=this.getAuthToken();if(!e)return 0;try{return(await t.A.get("".concat(s,"/wishlist/count"),{headers:{Authorization:"Bearer ".concat(e)}})).data.count}catch(r){return 0}}}},5444:(e,r,a)=>{a.d(r,{A:()=>n});var t=a(5043),s=a(4401),o=a(2339),i=a(579);const n=e=>{let{productId:r,variant:a="icon",size:n="md",className:l=""}=e;const[c,d]=(0,t.useState)(!1),[g,h]=(0,t.useState)(!1),[m,u]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{try{const e=await s.A.checkInWishlist(r);d(e)}catch(e){}finally{u(!1)}})()},[r]);const x=async e=>{e.preventDefault(),e.stopPropagation(),h(!0);try{c?(await s.A.removeFromWishlist(r),d(!1),o.Ay.success("Eliminado de favoritos")):(await s.A.addToWishlist(r),d(!0),o.Ay.success("A\xf1adido a favoritos"))}catch(a){a.message.includes("autenticado")||a.message.includes("sesi\xf3n")?o.Ay.error("Debes iniciar sesi\xf3n para a\xf1adir a favoritos"):o.Ay.error(c?"Error al eliminar de favoritos":"Error al a\xf1adir a favoritos")}finally{h(!1)}},p={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"},b={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return m?null:"icon"===a?(0,i.jsx)("button",{onClick:x,disabled:g,className:"".concat(p[n]," flex items-center justify-center rounded-full transition-all duration-300 ").concat(c?"bg-red-500 text-white hover:bg-red-600":"bg-white text-gray-600 hover:bg-red-50 hover:text-red-500"," ").concat(g?"opacity-50 cursor-not-allowed":"hover:scale-110"," shadow-md ").concat(l),"aria-label":c?"Eliminar de favoritos":"A\xf1adir a favoritos",children:g?(0,i.jsxs)("svg",{className:"".concat(b[n]," animate-spin"),fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,i.jsx)("svg",{className:b[n],fill:c?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}):(0,i.jsxs)("button",{onClick:x,disabled:g,className:"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 ".concat(c?"bg-red-500 text-white hover:bg-red-600":"bg-gray-100 text-gray-700 hover:bg-red-50 hover:text-red-500"," ").concat(g?"opacity-50 cursor-not-allowed":""," ").concat(l),children:[(0,i.jsx)("svg",{className:"w-5 h-5",fill:c?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,i.jsx)("span",{children:c?"En favoritos":"A\xf1adir a favoritos"})]})}}}]);
//# sourceMappingURL=436.d745b9b1.chunk.js.map