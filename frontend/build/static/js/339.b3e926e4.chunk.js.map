{"version":3,"file":"static/js/339.b3e926e4.chunk.js","mappings":"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","sources":["pages/MyOrdersPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport authService from '../services/authService';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface OrderItem {\r\n  id: number;\r\n  productName: string;\r\n  variantName: string;\r\n  quantity: number;\r\n  price: number;\r\n}\r\n\r\ninterface Order {\r\n  id: number;\r\n  orderNumber: string;\r\n  status: string;\r\n  total: number;\r\n  trackingCode: string | null;\r\n  createdAt: string;\r\n  items: OrderItem[];\r\n  customerName: string;\r\n  customerEmail: string;\r\n  shippingAddress: string;\r\n}\r\n\r\nconst MyOrdersPage: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const [orders, setOrders] = useState<Order[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n\r\n  const loadOrders = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await authService.getMyOrders(page, 10);\r\n      setOrders(response.data || []);\r\n      setTotalPages(response.pagination?.pages || 1);\r\n    } catch (error: any) {\r\n      console.error('Error loading orders:', error);\r\n      setOrders([]);\r\n      toast.error(error.message || 'Error cargando √≥rdenes');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    if (!authService.isAuthenticated()) {\r\n      toast.error('Debes iniciar sesi√≥n');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    loadOrders();\r\n  }, [navigate, loadOrders]);\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig: Record<string, { bg: string; text: string; label: string }> = {\r\n      PENDING: { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'Pendiente' },\r\n      PROCESSING: { bg: 'bg-blue-100', text: 'text-blue-800', label: 'Procesando' },\r\n      SHIPPED: { bg: 'bg-purple-100', text: 'text-purple-800', label: 'Enviado' },\r\n      DELIVERED: { bg: 'bg-green-100', text: 'text-green-800', label: 'Entregado' },\r\n      CANCELLED: { bg: 'bg-red-100', text: 'text-red-800', label: 'Cancelado' }\r\n    };\r\n\r\n    const config = statusConfig[status] || statusConfig.PENDING;\r\n\r\n    return (\r\n      <span className={`px-3 py-1 rounded-full text-xs font-medium ${config.bg} ${config.text}`}>\r\n        {config.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('es-ES', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n  };\r\n\r\n  const formatPrice = (price: number) => {\r\n    return new Intl.NumberFormat('es-PE', {\r\n      style: 'currency',\r\n      currency: 'PEN'\r\n    }).format(price);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-3xl font-bold\">Mis √ìrdenes</h1>\r\n        <Link\r\n          to=\"/profile\"\r\n          className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n        >\r\n          ‚Üê Volver al Perfil\r\n        </Link>\r\n      </div>\r\n\r\n      {orders.length === 0 ? (\r\n        <div className=\"bg-white rounded-lg shadow-md p-12 text-center\">\r\n          <div className=\"text-6xl mb-4\">üì¶</div>\r\n          <h2 className=\"text-2xl font-bold mb-2\">No tienes √≥rdenes a√∫n</h2>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            Comienza a comprar y tus √≥rdenes aparecer√°n aqu√≠\r\n          </p>\r\n          <Link\r\n            to=\"/products\"\r\n            className=\"inline-block bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Ver Productos\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"space-y-6\">\r\n            {orders.map((order) => (\r\n              <div key={order.id} className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n                <div className=\"bg-gray-50 px-6 py-4 border-b flex flex-wrap justify-between items-center gap-4\">\r\n                  <div>\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <h3 className=\"text-lg font-bold\">Orden #{order.orderNumber}</h3>\r\n                      {getStatusBadge(order.status)}\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-600 mt-1\">\r\n                      Fecha: {formatDate(order.createdAt)}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <p className=\"text-sm text-gray-600\">Total</p>\r\n                    <p className=\"text-2xl font-bold text-blue-600\">\r\n                      {formatPrice(order.total)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-6\">\r\n                  <div className=\"mb-4\">\r\n                    <h4 className=\"font-semibold mb-2\">Productos:</h4>\r\n                    <div className=\"space-y-2\">\r\n                      {order.items.map((item) => (\r\n                        <div\r\n                          key={item.id}\r\n                          className=\"flex justify-between items-center py-2 border-b last:border-b-0\"\r\n                        >\r\n                          <div>\r\n                            <p className=\"font-medium\">{item.productName}</p>\r\n                            <p className=\"text-sm text-gray-600\">{item.variantName}</p>\r\n                          </div>\r\n                          <div className=\"text-right\">\r\n                            <p className=\"font-medium\">\r\n                              {item.quantity} x {formatPrice(item.price)}\r\n                            </p>\r\n                            <p className=\"text-sm text-gray-600\">\r\n                              = {formatPrice(item.quantity * item.price)}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-600\">Direcci√≥n de env√≠o:</p>\r\n                      <p className=\"font-medium\">{order.shippingAddress}</p>\r\n                    </div>\r\n                    {order.trackingCode && (\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600\">C√≥digo de rastreo:</p>\r\n                        <p className=\"font-mono font-medium\">{order.trackingCode}</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {order.trackingCode && (\r\n                    <Link\r\n                      to={`/track/${order.trackingCode}`}\r\n                      className=\"inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      üîç Rastrear Env√≠o\r\n                    </Link>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {totalPages > 1 && (\r\n            <div className=\"mt-8 flex justify-center gap-2\">\r\n              <button\r\n                onClick={() => setPage(page - 1)}\r\n                disabled={page === 1}\r\n                className=\"px-4 py-2 border rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50\"\r\n              >\r\n                ‚Üê Anterior\r\n              </button>\r\n              <span className=\"px-4 py-2\">\r\n                P√°gina {page} de {totalPages}\r\n              </span>\r\n              <button\r\n                onClick={() => setPage(page + 1)}\r\n                disabled={page === totalPages}\r\n                className=\"px-4 py-2 border rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50\"\r\n              >\r\n                Siguiente ‚Üí\r\n              </button>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyOrdersPage;\r\n"],"names":["MyOrdersPage","navigate","useNavigate","orders","setOrders","useState","loading","setLoading","page","setPage","totalPages","setTotalPages","loadOrders","useCallback","async","_response$pagination","response","authService","getMyOrders","data","pagination","pages","error","console","toast","message","useEffect","isAuthenticated","getStatusBadge","status","statusConfig","PENDING","bg","text","label","PROCESSING","SHIPPED","DELIVERED","CANCELLED","config","_jsx","className","concat","children","formatPrice","price","Intl","NumberFormat","style","currency","format","_jsxs","Link","to","length","_Fragment","map","order","orderNumber","dateString","createdAt","Date","toLocaleDateString","year","month","day","total","items","item","productName","variantName","quantity","id","shippingAddress","trackingCode","onClick","disabled"],"sourceRoot":""}