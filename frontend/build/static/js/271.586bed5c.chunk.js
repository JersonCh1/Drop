"use strict";(self.webpackChunkdropshipping_frontend=self.webpackChunkdropshipping_frontend||[]).push([[271],{9271:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var r=t(5043),a=t(3216),l=t(4293),o=t(2339),n=t(9722),i=t(9379),d=t(579);const c="https://drop-production-cd2b.up.railway.app/api",x=e=>{var s,t;let{adminToken:a,product:l,onClose:x,onSuccess:m}=e;const[h,u]=(0,r.useState)({name:(null===l||void 0===l?void 0:l.name)||"",slug:(null===l||void 0===l?void 0:l.slug)||"",description:(null===l||void 0===l?void 0:l.description)||"",basePrice:l?String(l.basePrice||""):"",categoryId:"cat_iphone_cases",compatibility:(null===l||void 0===l?void 0:l.compatibility)||[],isFeatured:(null===l||void 0===l?void 0:l.isFeatured)||!1,inStock:(null===l||void 0===l?void 0:l.isActive)||!0,stockCount:l?String(l.stockCount||""):""}),[p,g]=(0,r.useState)(!1),[j,b]=(0,r.useState)(""),[v,y]=(0,r.useState)((null===l||void 0===l||null===(s=l.images)||void 0===s||null===(t=s[0])||void 0===t?void 0:t.url)||"");return(0,d.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,d.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black opacity-50",onClick:x}),(0,d.jsxs)("div",{className:"relative bg-white rounded-lg max-w-2xl w-full p-6",children:[(0,d.jsx)("h3",{className:"text-xl font-bold mb-4",children:l?"Editar Producto":"Crear Producto"}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0);try{const e={name:h.name,slug:h.slug,description:h.description||null,basePrice:parseFloat(h.basePrice)||0,categoryId:h.categoryId,brand:h.name.split(" ")[0]||"Generic",model:"Universal",compatibility:JSON.stringify(h.compatibility||[]),isFeatured:h.isFeatured,inStock:h.inStock,stockCount:parseInt(h.stockCount)||0,imageUrl:v||null};if(console.log("Enviando datos:",e),l)await n.A.put("".concat(c,"/products/").concat(l.id),e,{headers:{Authorization:"Bearer ".concat(a)}}),o.Ay.success("Producto actualizado");else{var s,t;const r=await n.A.post("".concat(c,"/products"),e,{headers:{Authorization:"Bearer ".concat(a)}});v&&null!==(s=r.data)&&void 0!==s&&null!==(t=s.product)&&void 0!==t&&t.id&&await n.A.post("".concat(c,"/products/").concat(r.data.product.id,"/images"),{url:v,altText:h.name,position:0,isMain:!0},{headers:{Authorization:"Bearer ".concat(a)}}),o.Ay.success("Producto creado con imagen")}m(),x()}catch(j){var r,i,d,u,p;console.error("Error saving product:",j),console.error("Response:",null===(r=j.response)||void 0===r?void 0:r.data),o.Ay.error((null===(i=j.response)||void 0===i||null===(d=i.data)||void 0===d?void 0:d.error)||(null===(u=j.response)||void 0===u||null===(p=u.data)||void 0===p?void 0:p.message)||"Error al guardar producto")}finally{g(!1)}},className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),(0,d.jsx)("input",{type:"text",required:!0,value:h.name,onChange:e=>u((0,i.A)((0,i.A)({},h),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),(0,d.jsx)("input",{type:"text",required:!0,value:h.slug,onChange:e=>u((0,i.A)((0,i.A)({},h),{},{slug:e.target.value.toLowerCase().replace(/\s+/g,"-")})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,d.jsx)("textarea",{rows:3,value:h.description,onChange:e=>u((0,i.A)((0,i.A)({},h),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio Base *"}),(0,d.jsx)("input",{type:"number",step:"0.01",required:!0,value:h.basePrice,onChange:e=>u((0,i.A)((0,i.A)({},h),{},{basePrice:""===e.target.value?"":parseFloat(e.target.value)||""})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),(0,d.jsx)("input",{type:"number",value:h.stockCount,onChange:e=>u((0,i.A)((0,i.A)({},h),{},{stockCount:""===e.target.value?"":parseInt(e.target.value)||""})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsx)("div",{className:"flex items-center space-x-4 pt-7",children:(0,d.jsxs)("label",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",checked:h.isFeatured,onChange:e=>u((0,i.A)((0,i.A)({},h),{},{isFeatured:e.target.checked})),className:"mr-2"}),(0,d.jsx)("span",{className:"text-sm",children:"Destacado"})]})})]}),(0,d.jsxs)("div",{className:"border-t pt-4",children:[(0,d.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Imagen del Producto"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("input",{type:"url",placeholder:"URL de la imagen (ej: https://imgur.com/imagen.jpg)",value:j,onChange:e=>b(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 text-sm"}),(0,d.jsx)("button",{type:"button",onClick:()=>{j?(y(j),o.Ay.success("Vista previa cargada")):o.Ay.error("Por favor ingresa una URL de imagen")},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm",children:"Vista Previa"})]}),(0,d.jsxs)("button",{type:"button",onClick:()=>{const e=h.name||"iphone case",s="https://source.unsplash.com/800x800/?".concat(encodeURIComponent(e));b(s),y(s),o.Ay.success("Imagen autom\xe1tica de Unsplash cargada")},className:"w-full px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-md hover:from-purple-600 hover:to-pink-600 text-sm font-medium flex items-center justify-center",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Usar Unsplash Autom\xe1tico"]}),v&&(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("img",{src:v,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border-2 border-gray-200",onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="400"%3E%3Crect fill="%23f0f0f0" width="400" height="400"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="24" dy="10.5" font-weight="bold" x="50%25" y="50%25" text-anchor="middle"%3EError al cargar%3C/text%3E%3C/svg%3E'}}),(0,d.jsx)("button",{type:"button",onClick:()=>{b(""),y(""),o.Ay.success("Imagen removida")},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",title:"Eliminar imagen",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"\ud83d\udca1 Tip: Puedes usar URLs de Unsplash, Imgur, o cualquier imagen p\xfablica en internet"})]})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,d.jsx)("button",{type:"button",onClick:x,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancelar"}),(0,d.jsx)("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:p?"Guardando...":l?"Actualizar":"Crear"})]})]})]})]})})},m=e=>{let{product:s,onClose:t}=e;return(0,d.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,d.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black opacity-50",onClick:t}),(0,d.jsxs)("div",{className:"relative bg-white rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,d.jsx)("h3",{className:"text-2xl font-bold",children:s.name}),(0,d.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h4",{className:"font-semibold mb-2",children:["Im\xe1genes (",s.images.length,")"]}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-2",children:s.images.map((e,s)=>(0,d.jsx)("img",{src:e.url,alt:e.altText,className:"w-full h-32 object-cover rounded"},s))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-semibold mb-2",children:"Detalles"}),(0,d.jsxs)("dl",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"text-gray-500",children:"Precio:"}),(0,d.jsxs)("dd",{className:"font-semibold",children:["$","number"===typeof s.basePrice?s.basePrice.toFixed(2):parseFloat(String(s.basePrice)).toFixed(2)]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"text-gray-500",children:"Stock:"}),(0,d.jsx)("dd",{children:s.stockCount})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"text-gray-500",children:"Variantes:"}),(0,d.jsx)("dd",{children:s.variants.length})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"text-gray-500",children:"Categor\xeda:"}),(0,d.jsx)("dd",{children:s.category_name})]})]})]})]}),s.description&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)("h4",{className:"font-semibold mb-2",children:"Descripci\xf3n"}),(0,d.jsx)("p",{className:"text-gray-600",children:s.description})]})]})]})})},h=e=>{let{adminToken:s}=e;const[t,a]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),[h,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[j,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{v()},[]);const v=async()=>{i(!0);try{const e=await n.A.get("".concat(c,"/products?limit=100"),{headers:{Authorization:"Bearer ".concat(s)}});a(e.data.data)}catch(e){console.error("Error loading products:",e),o.Ay.error("Error al cargar productos")}finally{i(!1)}};return l?(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,d.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando productos..."})]}):(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gesti\xf3n de Productos"}),(0,d.jsxs)("p",{className:"text-gray-600",children:[t.length," productos en total"]})]}),(0,d.jsxs)("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium flex items-center",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Crear Producto"]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variantes"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,d.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"h-12 w-12 flex-shrink-0",children:e.images[0]?(0,d.jsx)("img",{className:"h-12 w-12 rounded object-cover",src:e.images[0].url,alt:e.name}):(0,d.jsx)("div",{className:"h-12 w-12 bg-gray-200 rounded flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,d.jsxs)("div",{className:"ml-4",children:[(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,d.jsx)("div",{className:"text-sm text-gray-500",children:e.category_name})]})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:["$","number"===typeof e.basePrice?e.basePrice.toFixed(2):parseFloat(String(e.basePrice)).toFixed(2)]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm text-gray-900",children:e.stockCount})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm text-gray-900",children:e.variants.length})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"flex flex-col space-y-1",children:[e.isActive?(0,d.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activo"}):(0,d.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactivo"}),e.isFeatured&&(0,d.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"\u2b50 Destacado"})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,d.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,d.jsx)("button",{onClick:()=>b(e),className:"text-blue-600 hover:text-blue-900",title:"Ver detalles",children:(0,d.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,d.jsx)("button",{onClick:()=>g(e),className:"text-indigo-600 hover:text-indigo-900",title:"Editar",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,d.jsx)("button",{onClick:()=>(async e=>{try{await n.A.put("".concat(c,"/products/").concat(e.id),{isFeatured:!e.isFeatured},{headers:{Authorization:"Bearer ".concat(s)}}),o.Ay.success(e.isFeatured?"Removido de destacados":"Marcado como destacado"),v()}catch(t){console.error("Error updating product:",t),o.Ay.error("Error al actualizar producto")}})(e),className:"text-yellow-600 hover:text-yellow-900",title:e.isFeatured?"Quitar de destacados":"Marcar como destacado",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:e.isFeatured?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),(0,d.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de desactivar este producto?"))try{await n.A.delete("".concat(c,"/products/").concat(e),{headers:{Authorization:"Bearer ".concat(s)}}),o.Ay.success("Producto desactivado"),v()}catch(t){console.error("Error deleting product:",t),o.Ay.error("Error al desactivar producto")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Desactivar",children:(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.id))})]})}),0===t.length&&(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay productos"}),(0,d.jsx)("p",{className:"text-gray-500 mb-4",children:"Comienza creando tu primer producto"}),(0,d.jsx)("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Crear Producto"})]})]}),h&&(0,d.jsx)(x,{adminToken:s,onClose:()=>u(!1),onSuccess:()=>{u(!1),v()}}),p&&(0,d.jsx)(x,{adminToken:s,product:p,onClose:()=>g(null),onSuccess:()=>{g(null),v()}}),j&&(0,d.jsx)(m,{product:j,onClose:()=>b(null)})]})},u=()=>{const[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)(!0),[l,n]=(0,r.useState)(!1),[c,x]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),[u,p]=(0,r.useState)(!1),[g,j]=(0,r.useState)({name:"",slug:"",description:"",website:"",averageShippingDays:"15-30",defaultCommission:0,defaultShippingCost:0,contactEmail:"",contactPhone:""}),b=localStorage.getItem("adminToken")||localStorage.getItem("authToken");(0,r.useEffect)(()=>{v()},[]);const v=async()=>{try{a(!0);const e=await fetch("http://localhost:3001/api/suppliers",{headers:{Authorization:"Bearer ".concat(b)}});if(!e.ok)throw new Error("Error al cargar proveedores");const t=await e.json();s(t.data||[])}catch(e){console.error("Error:",e),o.Ay.error(e.message||"Error al cargar proveedores")}finally{a(!1)}},y=e=>{const{name:s,value:t}=e.target;if(j(e=>(0,i.A)((0,i.A)({},e),{},{[s]:t})),"name"===s&&!c){const e=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");j(s=>(0,i.A)((0,i.A)({},s),{},{slug:e}))}};return t?(0,d.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gesti\xf3n de Proveedores"}),(0,d.jsx)("p",{className:"text-gray-600 mt-1",children:"Administra tus proveedores de dropshipping"})]}),(0,d.jsxs)("button",{onClick:()=>{n(!l),l&&(x(null),j({name:"",slug:"",description:"",website:"",averageShippingDays:"15-30",defaultCommission:0,defaultShippingCost:0,contactEmail:"",contactPhone:""}))},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,d.jsx)("span",{children:l?"Cancelar":"Nuevo Proveedor"})]})]}),l&&(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-4",children:c?"Editar Proveedor":"Nuevo Proveedor"}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g.name&&g.slug)try{const e=c?"http://localhost:3001/api/suppliers/".concat(c.id):"http://localhost:3001/api/suppliers",s=c?"PUT":"POST",t=await fetch(e,{method:s,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)},body:JSON.stringify(g)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Error al guardar proveedor")}const r=await t.json();o.Ay.success(r.message||"Proveedor guardado exitosamente"),j({name:"",slug:"",description:"",website:"",averageShippingDays:"15-30",defaultCommission:0,defaultShippingCost:0,contactEmail:"",contactPhone:""}),x(null),n(!1),v()}catch(s){console.error("Error:",s),o.Ay.error(s.message||"Error al guardar proveedor")}else o.Ay.error("Nombre y slug son requeridos")},className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre *"}),(0,d.jsx)("input",{type:"text",name:"name",value:g.name,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug *"}),(0,d.jsx)("input",{type:"text",name:"slug",value:g.slug,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),(0,d.jsx)("input",{type:"url",name:"website",value:g.website,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://..."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiempo de Env\xedo Promedio"}),(0,d.jsx)("input",{type:"text",name:"averageShippingDays",value:g.averageShippingDays,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"15-30"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comisi\xf3n Default (%)"}),(0,d.jsx)("input",{type:"number",name:"defaultCommission",value:g.defaultCommission,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",step:"0.01",min:"0"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Costo de Env\xedo Default ($)"}),(0,d.jsx)("input",{type:"number",name:"defaultShippingCost",value:g.defaultShippingCost,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",step:"0.01",min:"0"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email de Contacto"}),(0,d.jsx)("input",{type:"email",name:"contactEmail",value:g.contactEmail,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tel\xe9fono de Contacto"}),(0,d.jsx)("input",{type:"tel",name:"contactPhone",value:g.contactPhone,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,d.jsx)("textarea",{name:"description",value:g.description,onChange:y,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,d.jsx)("button",{type:"button",onClick:()=>{n(!1),x(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,d.jsxs)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[c?"Actualizar":"Crear"," Proveedor"]})]})]})]}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proveedor"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Productos"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xd3rdenes"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Env\xedo"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Comisi\xf3n"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,d.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"No hay proveedores registrados. Crea uno para comenzar."})}):e.map(e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,d.jsx)("div",{className:"text-sm text-gray-500",children:e.slug})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:"text-sm text-gray-900",children:e.productsCount||0})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:"text-sm text-gray-900",children:e.ordersCount||0})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("span",{className:"text-sm text-gray-900",children:[e.averageShippingDays," d\xedas"]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("span",{className:"text-sm text-gray-900",children:[e.defaultCommission,"%"]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Activo":"Inactivo"})}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[(0,d.jsx)("button",{onClick:()=>(async e=>{try{const s=await fetch("http://localhost:3001/api/suppliers/".concat(e.id,"/stats"),{headers:{Authorization:"Bearer ".concat(b)}});if(!s.ok)throw new Error("Error al cargar estad\xedsticas");const t=await s.json();h((0,i.A)((0,i.A)({},e),t.data.stats)),p(!0)}catch(s){console.error("Error:",s),o.Ay.error(s.message||"Error al cargar estad\xedsticas")}})(e),className:"text-blue-600 hover:text-blue-900",title:"Ver estad\xedsticas",children:(0,d.jsx)("svg",{className:"w-5 h-5 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,d.jsx)("button",{onClick:()=>(e=>{x(e),j({name:e.name,slug:e.slug,description:e.description||"",website:e.website||"",averageShippingDays:e.averageShippingDays,defaultCommission:e.defaultCommission,defaultShippingCost:e.defaultShippingCost,contactEmail:e.contactEmail||"",contactPhone:e.contactPhone||""}),n(!0)})(e),className:"text-indigo-600 hover:text-indigo-900",title:"Editar",children:(0,d.jsx)("svg",{className:"w-5 h-5 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,d.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de desactivar este proveedor?"))try{const s=await fetch("http://localhost:3001/api/suppliers/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(b)}});if(!s.ok){const e=await s.json();throw new Error(e.message||"Error al eliminar proveedor")}o.Ay.success("Proveedor desactivado exitosamente"),v()}catch(s){console.error("Error:",s),o.Ay.error(s.message||"Error al eliminar proveedor")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Desactivar",children:(0,d.jsx)("svg",{className:"w-5 h-5 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id))})]})})}),u&&m&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full m-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,d.jsxs)("h3",{className:"text-xl font-bold",children:["Estad\xedsticas - ",m.name]}),(0,d.jsx)("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-700",children:(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Total Productos"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:m.productsCount||0})]}),(0,d.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Productos Activos"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600",children:m.activeProducts||0})]}),(0,d.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Total \xd3rdenes"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:m.ordersCount||0})]}),(0,d.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"\xd3rdenes Pendientes"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:m.pendingOrders||0})]}),(0,d.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Confiabilidad"}),(0,d.jsxs)("div",{className:"text-2xl font-bold text-indigo-600",children:[m.reliability||100,"%"]})]}),(0,d.jsxs)("div",{className:"bg-pink-50 p-4 rounded-lg",children:[(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Rating"}),(0,d.jsxs)("div",{className:"text-2xl font-bold text-pink-600",children:[m.rating||0,"/5"]})]})]})]})})]})},p=()=>{const[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)([]),[l,n]=(0,r.useState)(!1),[c,x]=(0,r.useState)(null),[m,h]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[g,j]=(0,r.useState)(""),[b,v]=(0,r.useState)(30),y=localStorage.getItem("adminToken")||localStorage.getItem("authToken");(0,r.useEffect)(()=>{N(),w()},[]);const f="https://drop-production-cd2b.up.railway.app/api",N=async()=>{try{const e=await fetch("".concat(f,"/suppliers?active=true"),{headers:{Authorization:"Bearer ".concat(y)}});if(!e.ok)throw new Error("Error cargando proveedores");const t=await e.json();s(t.data||[])}catch(e){console.error("Error loading suppliers:",e),o.Ay.error("Error al cargar proveedores")}},w=async()=>{try{const e=await fetch("".concat(f,"/categories"),{headers:{Authorization:"Bearer ".concat(y)}});if(!e.ok)throw new Error("Error cargando categor\xedas");const s=await e.json();a(s.data||[])}catch(e){console.error("Error loading categories:",e),o.Ay.error("Error al cargar categor\xedas")}},k=()=>c?(c.supplierPrice*(1+b/100)).toFixed(2):"0.00";return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Importar Producto"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Importa productos desde AliExpress, Amazon, CJ Dropshipping, etc."})]})}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m.trim())if(u)if(g){n(!0);try{const e=await fetch("".concat(f,"/suppliers/import-product"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify({url:m,supplierId:u,categoryId:g,profitMargin:b})});if(!e.ok){const s=await e.json();throw new Error(s.message||"Error al importar producto")}const s=await e.json();if(!s.success)throw new Error(s.message);x(s.data.product),o.Ay.success("Producto importado exitosamente. Revisa los datos antes de guardar.")}catch(s){console.error("Error importing product:",s),o.Ay.error(s.message||"Error al importar producto")}finally{n(!1)}}else o.Ay.error("Por favor selecciona una categor\xeda");else o.Ay.error("Por favor selecciona un proveedor");else o.Ay.error("Por favor ingresa una URL")},className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL del Producto *"}),(0,d.jsx)("input",{type:"url",value:m,onChange:e=>h(e.target.value),placeholder:"https://www.aliexpress.com/item/...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Soporta: AliExpress, CJ Dropshipping, Amazon y otras plataformas"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proveedor *"}),(0,d.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Seleccionar proveedor"}),e.map(e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categor\xeda *"}),(0,d.jsxs)("select",{value:g,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Seleccionar categor\xeda"}),t.map(e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Margen de Ganancia (%)"}),(0,d.jsx)("input",{type:"number",value:b,onChange:e=>v(parseInt(e.target.value)||0),min:"0",max:"500",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,d.jsx)("div",{className:"flex justify-end",children:(0,d.jsx)("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:l?"Importando...":"Importar Producto"})})]})]}),c&&(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Producto Importado"}),c.needsManualReview&&(0,d.jsx)("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full",children:"\u26a0\ufe0f Requiere Revisi\xf3n Manual"})]}),c.images&&c.images.length>0&&(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),c.images.length," Im\xe1genes Importadas Autom\xe1ticamente"]}),(0,d.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:c.images.map((e,s)=>(0,d.jsxs)("div",{className:"relative group",children:[(0,d.jsx)("img",{src:e,alt:"Producto ".concat(s+1),className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200 hover:border-blue-500 transition-all shadow-sm",onError:e=>{e.currentTarget.src="https://via.placeholder.com/150?text=Error"}}),(0,d.jsxs)("div",{className:"absolute top-1 right-1 bg-blue-600 text-white text-xs px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:["#",s+1]})]},s))}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["\u2705 Las im\xe1genes se importaron autom\xe1ticamente desde ",c.platform]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),(0,d.jsx)("input",{type:"text",value:c.name,onChange:e=>x((0,i.A)((0,i.A)({},c),{},{name:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,d.jsx)("textarea",{value:c.description,onChange:e=>x((0,i.A)((0,i.A)({},c),{},{description:e.target.value})),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plataforma"}),(0,d.jsx)("input",{type:"text",value:c.platform,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL del Proveedor"}),(0,d.jsx)("input",{type:"text",value:c.supplierUrl,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiempo de Env\xedo"}),(0,d.jsx)("input",{type:"text",value:c.shippingTime,onChange:e=>x((0,i.A)((0,i.A)({},c),{},{shippingTime:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,d.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"C\xe1lculo de Precios"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600",children:"Precio del Proveedor:"}),(0,d.jsxs)("span",{className:"font-semibold text-gray-900",children:["$",c.supplierPrice.toFixed(2)]})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600",children:"Margen de Ganancia:"}),(0,d.jsxs)("span",{className:"font-semibold text-blue-600",children:[b,"%"]})]}),(0,d.jsx)("div",{className:"border-t border-blue-200 pt-2 mt-2",children:(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"Precio de Venta:"}),(0,d.jsxs)("span",{className:"font-bold text-lg text-green-600",children:["$",k()]})]})}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600",children:"Ganancia por Unidad:"}),(0,d.jsxs)("span",{className:"font-semibold text-green-600",children:["$",(()=>{if(!c)return"0.00";return(parseFloat(k())-c.supplierPrice).toFixed(2)})()]})]})]})]}),(0,d.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,d.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Notas Importantes"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1 list-disc list-inside",children:[(0,d.jsx)("li",{children:"Revisa cuidadosamente toda la informaci\xf3n antes de guardar"}),(0,d.jsx)("li",{children:"Las im\xe1genes deben descargarse manualmente si es necesario"}),(0,d.jsx)("li",{children:"Verifica los tiempos de env\xedo y disponibilidad"}),(0,d.jsx)("li",{children:"Actualiza la descripci\xf3n para tu mercado"})]})]}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsx)("button",{onClick:()=>x(null),className:"flex-1 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors font-semibold",children:"Cancelar"}),(0,d.jsx)("button",{onClick:async()=>{if(c){n(!0);try{const e=await fetch("".concat(f,"/products"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(c)});if(!e.ok){const s=await e.json();throw new Error(s.message||"Error al guardar producto")}const s=await e.json();if(!s.success)throw new Error(s.message);o.Ay.success("Producto guardado exitosamente"),h(""),x(null)}catch(e){console.error("Error saving product:",e),o.Ay.error(e.message||"Error al guardar producto")}finally{n(!1)}}},disabled:l,className:"flex-1 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:l?"Guardando...":"Guardar Producto"})]})]})]})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200",children:[(0,d.jsxs)("h3",{className:"font-bold text-gray-900 mb-3 flex items-center",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"C\xf3mo Funciona"]}),(0,d.jsxs)("div",{className:"text-sm text-gray-700 space-y-2",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"1. Copia la URL:"})," Visita AliExpress, Amazon o CJ Dropshipping y copia la URL del producto que deseas importar."]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"2. Selecciona datos:"})," Elige el proveedor, categor\xeda y margen de ganancia para el producto."]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"3. Importa:"}),' Haz clic en "Importar Producto" y el sistema extraer\xe1 autom\xe1ticamente la informaci\xf3n.']}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"4. Revisa y edita:"})," Verifica los datos importados, edita lo necesario y ajusta los precios."]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"5. Guarda:"})," Cuando todo est\xe9 correcto, guarda el producto en tu cat\xe1logo."]})]})]})]})},g=()=>{const[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!0),[l,o]=(0,r.useState)("month");(0,r.useEffect)(()=>{n()},[l]);const n=async()=>{try{a(!0);const e="https://drop-production-cd2b.up.railway.app/api",t=localStorage.getItem("adminToken"),r=await fetch("".concat(e,"/analytics/dashboard?range=").concat(l),{headers:{Authorization:"Bearer ".concat(t)}}),o=await r.json();o.success&&s(o.data)}catch(e){console.error("Error loading stats:",e)}finally{a(!1)}},i=e=>new Intl.NumberFormat("es-PE",{style:"currency",currency:"USD"}).format(e),c=e=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-purple-100 text-purple-800",SHIPPED:"bg-indigo-100 text-indigo-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800");return t?(0,d.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,d.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando analytics..."})]})}):e?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Dashboard de Analytics"}),(0,d.jsx)("p",{className:"text-gray-600 mt-1",children:"Visualiza el rendimiento de tu tienda en tiempo real"})]}),(0,d.jsx)("div",{className:"flex space-x-2 bg-white rounded-lg border border-gray-200 p-1",children:["today","week","month","year"].map(e=>(0,d.jsxs)("button",{onClick:()=>o(e),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(l===e?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),children:["today"===e&&"Hoy","week"===e&&"Semana","month"===e&&"Mes","year"===e&&"A\xf1o"]},e))})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,d.jsxs)("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl shadow-lg p-6 text-white",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,d.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,d.jsx)("span",{className:"text-sm font-medium opacity-80",children:"Ingresos Totales"})]}),(0,d.jsx)("div",{className:"text-4xl font-extrabold mb-2",children:i(e.totalRevenue)}),(0,d.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),(0,d.jsxs)("span",{children:["+",(e.revenueToday/e.totalRevenue*100).toFixed(1),"% hoy"]})]})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-green-600 to-green-700 rounded-2xl shadow-lg p-6 text-white",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,d.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,d.jsx)("span",{className:"text-sm font-medium opacity-80",children:"\xd3rdenes Totales"})]}),(0,d.jsx)("div",{className:"text-4xl font-extrabold mb-2",children:e.totalOrders.toLocaleString()}),(0,d.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsxs)("span",{children:[e.ordersToday," hoy"]})]})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl shadow-lg p-6 text-white",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,d.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,d.jsx)("span",{className:"text-sm font-medium opacity-80",children:"Clientes"})]}),(0,d.jsx)("div",{className:"text-4xl font-extrabold mb-2",children:e.totalCustomers.toLocaleString()}),(0,d.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,d.jsx)("span",{children:"Base de clientes"})]})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 rounded-2xl shadow-lg p-6 text-white",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,d.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,d.jsx)("span",{className:"text-sm font-medium opacity-80",children:"Ticket Promedio"})]}),(0,d.jsx)("div",{className:"text-4xl font-extrabold mb-2",children:i(e.averageOrderValue)}),(0,d.jsxs)("div",{className:"flex items-center text-sm opacity-90",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,d.jsx)("span",{children:"Por orden"})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Ventas por Mes"}),(0,d.jsx)("div",{className:"space-y-4",children:e.salesByMonth.map((s,t)=>{const r=Math.max(...e.salesByMonth.map(e=>e.revenue)),a=s.revenue/r*100;return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-700",children:s.month}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("span",{className:"text-sm font-bold text-gray-900",children:i(s.revenue)}),(0,d.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",s.sales," \xf3rdenes)"]})]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,d.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:"".concat(a,"%")}})})]},t)})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"\xd3rdenes por Estado"}),(0,d.jsx)("div",{className:"space-y-3",children:e.ordersByStatus.map((s,t)=>{const r=e.ordersByStatus.reduce((e,s)=>e+s.count,0),a=s.count/r*100;return(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(c(s.status)),children:s.status}),(0,d.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2 w-32",children:(0,d.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(a,"%")}})})]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("div",{className:"text-sm font-bold text-gray-900",children:s.count}),(0,d.jsxs)("div",{className:"text-xs text-gray-500",children:[a.toFixed(1),"%"]})]})]},t)})})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Productos M\xe1s Vendidos"}),(0,d.jsx)("div",{className:"space-y-4",children:e.topProducts.map((e,s)=>(0,d.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gradient-to-r from-gray-50 to-transparent rounded-lg hover:from-blue-50 transition-colors",children:[(0,d.jsxs)("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold",children:["#",s+1]}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"text-sm font-bold text-gray-900 truncate",children:e.name}),(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:[e.sales," ventas"]})]}),(0,d.jsx)("div",{className:"text-right",children:(0,d.jsx)("p",{className:"text-sm font-bold text-green-600",children:i(e.revenue)})})]},e.id))})]}),(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"\xd3rdenes Recientes"}),(0,d.jsx)("div",{className:"space-y-3",children:e.recentOrders.map(e=>{return(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-blue-50 transition-colors",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-bold text-gray-900",children:e.orderNumber}),(0,d.jsx)("p",{className:"text-xs text-gray-600",children:e.customerName}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:(s=e.createdAt,new Date(s).toLocaleDateString("es-PE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("p",{className:"text-sm font-bold text-gray-900",children:i(e.total)}),(0,d.jsx)("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-semibold ".concat(c(e.status)),children:e.status})]})]},e.id);var s})})]})]})]}):(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,d.jsx)("p",{className:"text-red-700",children:"Error al cargar estad\xedsticas"})})},j="https://drop-production-cd2b.up.railway.app/api",b=e=>{var s,t,a,l;let{onClose:i,adminToken:c}=e;const[x,m]=(0,r.useState)("analytics"),[b,v]=(0,r.useState)([]),[y,f]=(0,r.useState)({totalOrders:0,totalRevenue:0,pendingOrders:0,completedOrders:0}),[N,w]=(0,r.useState)(!0),[k,C]=(0,r.useState)(null),E=(0,r.useCallback)(async()=>{try{w(!0);const e=await n.A.get("".concat(j,"/orders"),{headers:{Authorization:"Bearer ".concat(c)}});if(e.data.success){const s=e.data.data;v(s);const t=s.length,r=s.reduce((e,s)=>e+s.total,0),a=s.filter(e=>"PENDING"===e.status).length,l=s.filter(e=>"DELIVERED"===e.status).length;f({totalOrders:t,totalRevenue:r,pendingOrders:a,completedOrders:l})}}catch(e){console.error("Error fetching orders:",e),o.Ay.error("Error al cargar \xf3rdenes")}finally{w(!1)}},[c]);(0,r.useEffect)(()=>{E()},[E]);const L=e=>({PENDING:"bg-yellow-100 text-yellow-800 border-yellow-300",CONFIRMED:"bg-blue-100 text-blue-800 border-blue-300",PROCESSING:"bg-purple-100 text-purple-800 border-purple-300",SHIPPED:"bg-indigo-100 text-indigo-800 border-indigo-300",DELIVERED:"bg-green-100 text-green-800 border-green-300",CANCELLED:"bg-red-100 text-red-800 border-red-300"}[e]||"bg-gray-100 text-gray-800 border-gray-300");return(0,d.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden bg-gray-50",children:[(0,d.jsx)("header",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Panel de Administraci\xf3n"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Gestiona tu tienda"})]})]}),(0,d.jsx)("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"flex space-x-8 -mb-px",children:[(0,d.jsx)("button",{onClick:()=>m("analytics"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("analytics"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,d.jsx)("span",{children:"Analytics"})]})}),(0,d.jsx)("button",{onClick:()=>m("orders"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("orders"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,d.jsx)("span",{children:"\xd3rdenes"}),y.pendingOrders>0&&(0,d.jsx)("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:y.pendingOrders})]})}),(0,d.jsx)("button",{onClick:()=>m("products"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("products"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,d.jsx)("span",{children:"Productos"})]})}),(0,d.jsx)("button",{onClick:()=>m("suppliers"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("suppliers"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,d.jsx)("span",{children:"Proveedores"})]})}),(0,d.jsx)("button",{onClick:()=>m("import"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("import"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,d.jsx)("span",{children:"Importar"})]})})]})]})}),(0,d.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:N?(0,d.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),(0,d.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando..."})]})}):(0,d.jsxs)(d.Fragment,{children:["analytics"===x&&(0,d.jsx)(g,{}),"orders"===x&&(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total \xd3rdenes"}),(0,d.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:y.totalOrders})]}),(0,d.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]})}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Ingresos Totales"}),(0,d.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["$",y.totalRevenue.toFixed(2)]})]}),(0,d.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pendientes"}),(0,d.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:y.pendingOrders})]}),(0,d.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completadas"}),(0,d.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:y.completedOrders})]}),(0,d.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,d.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Todas las \xd3rdenes"})}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Orden"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("button",{onClick:()=>C(e),className:"text-sm font-medium text-blue-600 hover:text-blue-800",children:e.orderNumber})}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.customerFirstName," ",e.customerLastName]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.customerEmail}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",e.total.toFixed(2)]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("select",{value:e.status,onChange:s=>(async(e,s)=>{try{await n.A.patch("".concat(j,"/orders/").concat(e,"/status"),{status:s},{headers:{Authorization:"Bearer ".concat(c)}}),o.Ay.success("Estado actualizado a ".concat(s)),E()}catch(t){console.error("Error updating status:",t),o.Ay.error("Error al actualizar estado")}})(e.id,s.target.value),className:"px-3 py-1 text-xs font-medium rounded-full border ".concat(L(e.status)," cursor-pointer"),children:[(0,d.jsx)("option",{value:"PENDING",children:"Pendiente"}),(0,d.jsx)("option",{value:"CONFIRMED",children:"Confirmada"}),(0,d.jsx)("option",{value:"PROCESSING",children:"En Proceso"}),(0,d.jsx)("option",{value:"SHIPPED",children:"Enviada"}),(0,d.jsx)("option",{value:"DELIVERED",children:"Entregada"}),(0,d.jsx)("option",{value:"CANCELLED",children:"Cancelada"})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,d.jsx)("button",{onClick:()=>C(e),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Ver Detalles"})})]},e.id))})]})})]})]}),"products"===x&&(0,d.jsx)(h,{adminToken:c}),"suppliers"===x&&(0,d.jsx)(u,{}),"import"===x&&(0,d.jsx)(p,{})]})}),k&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,d.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20",children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black opacity-50",onClick:()=>C(null)}),(0,d.jsxs)("div",{className:"relative bg-white rounded-lg max-w-4xl w-full shadow-xl overflow-hidden",children:[(0,d.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsxs)("div",{className:"text-white",children:[(0,d.jsx)("h3",{className:"text-2xl font-bold",children:k.orderNumber}),(0,d.jsx)("p",{className:"text-blue-100 mt-1",children:new Date(k.createdAt).toLocaleString("es-PE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,d.jsx)("button",{onClick:()=>C(null),className:"p-1 hover:bg-blue-800 rounded text-white",children:(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,d.jsxs)("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,d.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center mb-3",children:[(0,d.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,d.jsx)("h4",{className:"font-semibold text-blue-900",children:"Informaci\xf3n del Cliente"})]}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Nombre completo:"}),(0,d.jsxs)("p",{className:"font-medium text-gray-900",children:[k.customerFirstName," ",k.customerLastName]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,d.jsx)("p",{className:"font-medium text-gray-900",children:k.customerEmail})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Tel\xe9fono:"}),(0,d.jsx)("p",{className:"font-medium text-gray-900",children:k.customerPhone||"N/A"})]})]})]}),(0,d.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center mb-3",children:[(0,d.jsxs)("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,d.jsx)("h4",{className:"font-semibold text-green-900",children:"Direcci\xf3n de Env\xedo"})]}),(0,d.jsxs)("div",{className:"text-sm text-gray-900",children:[(0,d.jsx)("p",{className:"font-medium",children:k.shippingAddress}),(0,d.jsxs)("p",{children:[k.shippingCity,", ",k.shippingState]}),(0,d.jsxs)("p",{children:["CP: ",k.shippingPostalCode]}),(0,d.jsx)("p",{className:"font-medium mt-1",children:k.shippingCountry}),k.notes&&(0,d.jsxs)("div",{className:"mt-2 pt-2 border-t border-green-200",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Notas:"}),(0,d.jsx)("p",{className:"text-gray-700",children:k.notes})]})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,d.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center mb-3",children:[(0,d.jsx)("svg",{className:"w-5 h-5 text-purple-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsx)("h4",{className:"font-semibold text-purple-900",children:"Estado"})]}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Estado de la orden:"}),(0,d.jsx)("p",{className:"font-medium",children:(0,d.jsx)("span",{className:"px-3 py-1 rounded-full text-xs ".concat(L(k.status)),children:(A=k.status,{PENDING:"Pendiente",CONFIRMED:"Confirmada",PROCESSING:"En Proceso",SHIPPED:"Enviada",DELIVERED:"Entregada",CANCELLED:"Cancelada"}[A]||A)})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Estado del pago:"}),(0,d.jsx)("p",{className:"font-medium text-gray-900",children:k.paymentStatus})]})]})]}),(0,d.jsxs)("div",{className:"bg-cyan-50 border border-cyan-200 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center mb-3",children:[(0,d.jsx)("svg",{className:"w-5 h-5 text-cyan-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),(0,d.jsx)("h4",{className:"font-semibold text-cyan-900",children:"M\xe9todo de Pago"})]}),(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"M\xe9todo:"}),(0,d.jsxs)("p",{className:"font-medium text-gray-900 capitalize",children:["yape"===k.paymentMethod&&"\ud83d\udcf1 Yape","plin"===k.paymentMethod&&"\ud83d\udcb8 Plin","mercadopago"===k.paymentMethod&&"\ud83d\udcb3 MercadoPago","stripe"===k.paymentMethod&&"\ud83d\udcb3 Tarjeta","manual"===k.paymentMethod&&"\ud83d\udcb5 Manual",!k.paymentMethod&&"N/A"]})]}),k.notes&&k.notes.includes("C\xf3digo de operaci\xf3n")&&(0,d.jsxs)("div",{className:"mt-2 pt-2 border-t border-cyan-200",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"C\xf3digo:"}),(0,d.jsx)("p",{className:"font-mono font-bold text-green-700 text-lg",children:(null===(s=k.notes.match(/C\xf3digo de operaci\xf3n.*?:\s*(\w+)/))||void 0===s?void 0:s[1])||"N/A"})]})]})]}),(0,d.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center mb-3",children:[(0,d.jsxs)("svg",{className:"w-5 h-5 text-orange-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{d:"M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})]}),(0,d.jsx)("h4",{className:"font-semibold text-orange-900",children:"Tracking"})]}),(0,d.jsx)("div",{className:"text-sm",children:k.trackingNumber?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:"text-gray-600",children:"N\xfamero de rastreo:"}),(0,d.jsx)("p",{className:"font-mono font-medium text-gray-900",children:k.trackingNumber}),k.trackingUrl&&(0,d.jsx)("a",{href:k.trackingUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs",children:"Ver seguimiento \u2192"})]}):(0,d.jsx)("p",{className:"text-gray-500 italic",children:"Sin informaci\xf3n de tracking"})})]})]}),(0,d.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden mb-6",children:[(0,d.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:(0,d.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"Productos Ordenados"]})}),(0,d.jsx)("div",{className:"p-4",children:(0,d.jsxs)("table",{className:"min-w-full",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Producto"}),(0,d.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Modelo/Color"}),(0,d.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Cant."}),(0,d.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Precio"}),(0,d.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-gray-200",children:k.items.map((e,s)=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.productName}),(0,d.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-600",children:[e.productModel&&(0,d.jsx)("div",{children:e.productModel}),e.productColor&&(0,d.jsx)("div",{className:"text-xs text-gray-500",children:e.productColor})]}),(0,d.jsx)("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:e.quantity}),(0,d.jsxs)("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:["$",e.price.toFixed(2)]}),(0,d.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:["$",e.total.toFixed(2)]})]},s))})]})})]}),(0,d.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,d.jsxs)("span",{className:"font-medium text-gray-900",children:["$",(null===(t=k.subtotal)||void 0===t?void 0:t.toFixed(2))||"0.00"]})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Env\xedo:"}),(0,d.jsxs)("span",{className:"font-medium text-gray-900",children:["$",(null===(a=k.shippingCost)||void 0===a?void 0:a.toFixed(2))||"0.00"]})]}),(0,d.jsxs)("div",{className:"flex justify-between pt-2 border-t border-gray-300",children:[(0,d.jsx)("span",{className:"text-lg font-bold text-gray-900",children:"Total:"}),(0,d.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:["$",k.total.toFixed(2)," USD"]})]})]})}),(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsxs)("a",{href:"https://wa.me/".concat(null===(l=k.customerPhone)||void 0===l?void 0:l.replace(/[^0-9]/g,""),"?text=Hola ").concat(k.customerFirstName,", tu orden ").concat(k.orderNumber," est\xe1 siendo procesada."),target:"_blank",rel:"noopener noreferrer",className:"w-full inline-flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Contactar Cliente por WhatsApp"]})})]})]})]})})]});var A},v=()=>{const e=(0,a.Zp)(),[s,t]=(0,r.useState)(!0),[n,i]=(0,r.useState)(!1),c=(0,r.useCallback)(async()=>{try{if(!l.A.isAuthenticated())return o.Ay.error("Debes iniciar sesi\xf3n"),void e("/login");if("ADMIN"!==(await l.A.getMe()).role)return o.Ay.error("No tienes permisos de administrador"),void e("/");i(!0)}catch(s){o.Ay.error("Error verificando permisos"),e("/login")}finally{t(!1)}},[e]);(0,r.useEffect)(()=>{c()},[c]);if(s)return(0,d.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!n)return null;const x=l.A.getToken();return console.log("\ud83d\udd11 Token para dashboard:",x),(0,d.jsx)(b,{onClose:()=>{e("/")},adminToken:x||""})}}}]);
//# sourceMappingURL=271.586bed5c.chunk.js.map