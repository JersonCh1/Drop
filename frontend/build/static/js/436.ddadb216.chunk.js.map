{"version":3,"file":"static/js/436.ddadb216.chunk.js","mappings":"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","sources":["components/common/LazyImage.tsx","components/products/AdvancedFilters.tsx","pages/ProductsPage.tsx","components/compare/CompareButton.tsx","services/wishlistService.ts","components/wishlist/WishlistButton.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\ninterface LazyImageProps {\r\n  src: string;\r\n  alt: string;\r\n  className?: string;\r\n  placeholder?: string;\r\n  onLoad?: () => void;\r\n  onError?: () => void;\r\n}\r\n\r\nconst LazyImage: React.FC<LazyImageProps> = ({\r\n  src,\r\n  alt,\r\n  className = '',\r\n  placeholder = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"400\" height=\"400\"%3E%3Crect fill=\"%23f0f0f0\" width=\"400\" height=\"400\"/%3E%3Ctext fill=\"%23999\" font-family=\"sans-serif\" font-size=\"20\" dy=\"10.5\" font-weight=\"bold\" x=\"50%25\" y=\"50%25\" text-anchor=\"middle\"%3ELoading...%3C/text%3E%3C/svg%3E',\r\n  onLoad,\r\n  onError\r\n}) => {\r\n  const [imageSrc, setImageSrc] = useState(placeholder);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isError, setIsError] = useState(false);\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n\r\n  useEffect(() => {\r\n    let observer: IntersectionObserver;\r\n    const imgElement = imgRef.current;\r\n\r\n    if (imgElement) {\r\n      observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting) {\r\n              // Image is in viewport, load it\r\n              const img = new Image();\r\n              img.src = src;\r\n\r\n              img.onload = () => {\r\n                setImageSrc(src);\r\n                setIsLoading(false);\r\n                onLoad?.();\r\n              };\r\n\r\n              img.onerror = () => {\r\n                setIsError(true);\r\n                setIsLoading(false);\r\n                // Fallback to placeholder service\r\n                setImageSrc('https://placehold.co/800x800/e5e7eb/6b7280?text=Image+Not+Found');\r\n                onError?.();\r\n              };\r\n\r\n              observer.unobserve(imgElement);\r\n            }\r\n          });\r\n        },\r\n        {\r\n          rootMargin: '50px', // Start loading 50px before entering viewport\r\n          threshold: 0.01\r\n        }\r\n      );\r\n\r\n      observer.observe(imgElement);\r\n    }\r\n\r\n    return () => {\r\n      if (observer && imgElement) {\r\n        observer.unobserve(imgElement);\r\n      }\r\n    };\r\n  }, [src, onLoad, onError]);\r\n\r\n  return (\r\n    <div className={`relative ${className}`}>\r\n      <img\r\n        ref={imgRef}\r\n        src={imageSrc}\r\n        alt={alt}\r\n        className={`transition-opacity duration-300 ${\r\n          isLoading ? 'opacity-50' : 'opacity-100'\r\n        } ${className}`}\r\n      />\r\n\r\n      {isLoading && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        </div>\r\n      )}\r\n\r\n      {isError && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800\">\r\n          <div className=\"text-center text-gray-400\">\r\n            <svg className=\"w-12 h-12 mx-auto mb-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n              />\r\n            </svg>\r\n            <p className=\"text-sm\">Error al cargar</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LazyImage;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\ninterface FilterOptions {\r\n  search: string;\r\n  priceMin: number;\r\n  priceMax: number;\r\n  rating: number;\r\n  categories: string[];\r\n  sortBy: string;\r\n  sortOrder: string;\r\n}\r\n\r\ninterface AdvancedFiltersProps {\r\n  filters: FilterOptions;\r\n  onFilterChange: (filters: FilterOptions) => void;\r\n  availableCategories: Array<{ id: string; name: string }>;\r\n}\r\n\r\nconst AdvancedFilters: React.FC<AdvancedFiltersProps> = ({\r\n  filters,\r\n  onFilterChange,\r\n  availableCategories\r\n}) => {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [localFilters, setLocalFilters] = useState(filters);\r\n\r\n  useEffect(() => {\r\n    setLocalFilters(filters);\r\n  }, [filters]);\r\n\r\n  const handleApplyFilters = () => {\r\n    onFilterChange(localFilters);\r\n    setIsExpanded(false);\r\n  };\r\n\r\n  const handleReset = () => {\r\n    const resetFilters: FilterOptions = {\r\n      search: '',\r\n      priceMin: 0,\r\n      priceMax: 1000,\r\n      rating: 0,\r\n      categories: [],\r\n      sortBy: 'createdAt',\r\n      sortOrder: 'DESC'\r\n    };\r\n    setLocalFilters(resetFilters);\r\n    onFilterChange(resetFilters);\r\n  };\r\n\r\n  const toggleCategory = (categoryId: string) => {\r\n    const newCategories = localFilters.categories.includes(categoryId)\r\n      ? localFilters.categories.filter(id => id !== categoryId)\r\n      : [...localFilters.categories, categoryId];\r\n    setLocalFilters({ ...localFilters, categories: newCategories });\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md mb-6 overflow-hidden\">\r\n      {/* Header con búsqueda rápida */}\r\n      <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"flex-1 relative\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Buscar productos...\"\r\n              value={localFilters.search}\r\n              onChange={(e) => setLocalFilters({ ...localFilters, search: e.target.value })}\r\n              onKeyPress={(e) => e.key === 'Enter' && handleApplyFilters()}\r\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            />\r\n            <svg\r\n              className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <button\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n            className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg font-medium flex items-center gap-2 transition-colors\"\r\n          >\r\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4\"\r\n              />\r\n            </svg>\r\n            Filtros\r\n            <svg\r\n              className={`w-4 h-4 transition-transform ${isExpanded ? 'rotate-180' : ''}`}\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtros expandidos */}\r\n      {isExpanded && (\r\n        <div className=\"p-6 space-y-6 bg-gray-50 dark:bg-gray-900\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n            {/* Rango de Precio */}\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3\">\r\n                Precio\r\n              </label>\r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <label className=\"text-xs text-gray-600 dark:text-gray-400\">Mínimo</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    value={localFilters.priceMin}\r\n                    onChange={(e) =>\r\n                      setLocalFilters({ ...localFilters, priceMin: Number(e.target.value) })\r\n                    }\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs text-gray-600 dark:text-gray-400\">Máximo</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    value={localFilters.priceMax}\r\n                    onChange={(e) =>\r\n                      setLocalFilters({ ...localFilters, priceMax: Number(e.target.value) })\r\n                    }\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Rating */}\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3\">\r\n                Calificación mínima\r\n              </label>\r\n              <div className=\"space-y-2\">\r\n                {[5, 4, 3, 2, 1].map((rating) => (\r\n                  <label key={rating} className=\"flex items-center cursor-pointer\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"rating\"\r\n                      checked={localFilters.rating === rating}\r\n                      onChange={() => setLocalFilters({ ...localFilters, rating })}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    <div className=\"flex items-center\">\r\n                      {[...Array(rating)].map((_, i) => (\r\n                        <svg\r\n                          key={i}\r\n                          className=\"w-4 h-4 text-yellow-400 fill-current\"\r\n                          viewBox=\"0 0 20 20\"\r\n                        >\r\n                          <path d=\"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z\" />\r\n                        </svg>\r\n                      ))}\r\n                      <span className=\"ml-2 text-sm text-gray-600 dark:text-gray-400\">y más</span>\r\n                    </div>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Categorías */}\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3\">\r\n                Categorías\r\n              </label>\r\n              <div className=\"space-y-2 max-h-48 overflow-y-auto\">\r\n                {availableCategories.map((category) => (\r\n                  <label key={category.id} className=\"flex items-center cursor-pointer\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={localFilters.categories.includes(category.id)}\r\n                      onChange={() => toggleCategory(category.id)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300\">{category.name}</span>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Ordenar por */}\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3\">\r\n                Ordenar por\r\n              </label>\r\n              <select\r\n                value={localFilters.sortBy}\r\n                onChange={(e) => setLocalFilters({ ...localFilters, sortBy: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white mb-3\"\r\n              >\r\n                <option value=\"createdAt\">Más reciente</option>\r\n                <option value=\"basePrice\">Precio</option>\r\n                <option value=\"name\">Nombre</option>\r\n                <option value=\"stockCount\">Stock</option>\r\n              </select>\r\n              <select\r\n                value={localFilters.sortOrder}\r\n                onChange={(e) => setLocalFilters({ ...localFilters, sortOrder: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n              >\r\n                <option value=\"DESC\">Descendente</option>\r\n                <option value=\"ASC\">Ascendente</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Botones de acción */}\r\n          <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n            <button\r\n              onClick={handleReset}\r\n              className=\"px-6 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg font-medium transition-colors\"\r\n            >\r\n              Limpiar filtros\r\n            </button>\r\n            <button\r\n              onClick={handleApplyFilters}\r\n              className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors\"\r\n            >\r\n              Aplicar filtros\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdvancedFilters;\r\n","// frontend/src/pages/ProductsPage.tsx\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { Link, useSearchParams } from 'react-router-dom';\r\nimport productService, { Product } from '../services/productService';\r\nimport { useCart } from '../context/CartContext';\r\nimport toast from 'react-hot-toast';\r\nimport WishlistButton from '../components/wishlist/WishlistButton';\r\nimport CompareButton from '../components/compare/CompareButton';\r\nimport LazyImage from '../components/common/LazyImage';\r\nimport AdvancedFilters from '../components/products/AdvancedFilters';\r\n\r\nconst ProductsPage: React.FC = () => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const { addItem } = useCart();\r\n\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [categories, setCategories] = useState<Array<{ id: string; name: string }>>([]);\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    limit: 12,\r\n    total: 0,\r\n    pages: 0\r\n  });\r\n\r\n  // Filtros\r\n  const [filters, setFilters] = useState({\r\n    search: searchParams.get('search') || '',\r\n    priceMin: Number(searchParams.get('priceMin')) || 0,\r\n    priceMax: Number(searchParams.get('priceMax')) || 1000,\r\n    rating: Number(searchParams.get('rating')) || 0,\r\n    categories: searchParams.get('categories')?.split(',') || [],\r\n    sortBy: searchParams.get('sortBy') || 'createdAt',\r\n    sortOrder: searchParams.get('sortOrder') || 'DESC'\r\n  });\r\n\r\n  // Load categories\r\n  useEffect(() => {\r\n    const loadCategories = async () => {\r\n      try {\r\n        const cats = await productService.getCategories();\r\n        setCategories(cats);\r\n      } catch (error) {\r\n        console.error('Error loading categories:', error);\r\n      }\r\n    };\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadProducts = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const page = parseInt(searchParams.get('page') || '1');\r\n\r\n      const response = await productService.getProducts({\r\n        page,\r\n        limit: pagination.limit,\r\n        search: filters.search || undefined,\r\n        categories: filters.categories.length > 0 ? filters.categories : undefined,\r\n        priceMin: filters.priceMin > 0 ? filters.priceMin : undefined,\r\n        priceMax: filters.priceMax < 1000 ? filters.priceMax : undefined,\r\n        rating: filters.rating > 0 ? filters.rating : undefined,\r\n        sortBy: filters.sortBy as any,\r\n        sortOrder: filters.sortOrder as any\r\n      } as any);\r\n\r\n      setProducts(response.data);\r\n      setPagination({\r\n        page: response.pagination?.page || 1,\r\n        limit: response.pagination?.limit || 12,\r\n        total: response.pagination?.total || 0,\r\n        pages: response.pagination?.pages || 0\r\n      });\r\n    } catch (error) {\r\n      console.error('Error loading products:', error);\r\n      toast.error('Error al cargar productos');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [searchParams, pagination.limit, filters]);\r\n\r\n  useEffect(() => {\r\n    loadProducts();\r\n  }, [loadProducts]);\r\n\r\n  // Refetch when tab becomes visible (e.g., after updating prices in admin)\r\n  useEffect(() => {\r\n    const handleVisibilityChange = () => {\r\n      if (document.visibilityState === 'visible') {\r\n        loadProducts();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n\r\n    return () => {\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n    };\r\n  }, [loadProducts]);\r\n\r\n  const handleFilterChange = (newFilters: typeof filters) => {\r\n    setFilters(newFilters);\r\n\r\n    const params = new URLSearchParams();\r\n    params.set('page', '1');\r\n    if (newFilters.search) params.set('search', newFilters.search);\r\n    if (newFilters.priceMin > 0) params.set('priceMin', newFilters.priceMin.toString());\r\n    if (newFilters.priceMax < 1000) params.set('priceMax', newFilters.priceMax.toString());\r\n    if (newFilters.rating > 0) params.set('rating', newFilters.rating.toString());\r\n    if (newFilters.categories.length > 0) params.set('categories', newFilters.categories.join(','));\r\n    if (newFilters.sortBy) params.set('sortBy', newFilters.sortBy);\r\n    if (newFilters.sortOrder) params.set('sortOrder', newFilters.sortOrder);\r\n\r\n    setSearchParams(params);\r\n  };\r\n\r\n  const handlePageChange = (newPage: number) => {\r\n    const params = new URLSearchParams(searchParams);\r\n    params.set('page', newPage.toString());\r\n    setSearchParams(params);\r\n    window.scrollTo(0, 0);\r\n  };\r\n\r\n  const handleAddToCart = (product: Product) => {\r\n    const lowestPrice = productService.getLowestPrice(product);\r\n    const mainImage = productService.getMainImage(product);\r\n\r\n    addItem({\r\n      id: product.id,\r\n      productId: parseInt(product.id.replace(/[^0-9]/g, '')) || 1,\r\n      name: product.name,\r\n      price: lowestPrice,\r\n      model: product.model || 'Universal',\r\n      color: product.variants[0]?.color || 'Default',\r\n      quantity: 1,\r\n      image: mainImage,\r\n      sku: product.variants[0]?.sku || product.slug,\r\n      maxQuantity: product.stockCount\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Todos los Productos</h1>\r\n          <p className=\"text-gray-600\">\r\n            {pagination.total} productos disponibles\r\n          </p>\r\n        </div>\r\n\r\n        {/* Advanced Filters */}\r\n        <AdvancedFilters\r\n          filters={filters}\r\n          onFilterChange={handleFilterChange}\r\n          availableCategories={categories}\r\n        />\r\n\r\n        {/* Loading */}\r\n        {loading && (\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n            <p className=\"mt-4 text-gray-600\">Cargando productos...</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Products Grid */}\r\n        {!loading && products.length > 0 && (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n            {products.map(product => (\r\n              <ProductCard\r\n                key={product.id}\r\n                product={product}\r\n                onAddToCart={handleAddToCart}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* No Results */}\r\n        {!loading && products.length === 0 && (\r\n          <div className=\"text-center py-12 bg-white rounded-lg\">\r\n            <div className=\"text-6xl mb-4\">🔍</div>\r\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n              No se encontraron productos\r\n            </h3>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              Intenta ajustar los filtros o buscar con otros términos\r\n            </p>\r\n            <button\r\n              onClick={() => {\r\n                const resetFilters = {\r\n                  search: '',\r\n                  priceMin: 0,\r\n                  priceMax: 1000,\r\n                  rating: 0,\r\n                  categories: [],\r\n                  sortBy: 'createdAt',\r\n                  sortOrder: 'DESC'\r\n                };\r\n                setFilters(resetFilters);\r\n                setSearchParams(new URLSearchParams());\r\n              }}\r\n              className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700\"\r\n            >\r\n              Limpiar filtros\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Pagination */}\r\n        {!loading && pagination.pages > 1 && (\r\n          <div className=\"mt-8 flex justify-center items-center space-x-2\">\r\n            <button\r\n              onClick={() => handlePageChange(pagination.page - 1)}\r\n              disabled={pagination.page === 1}\r\n              className=\"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              Anterior\r\n            </button>\r\n\r\n            {Array.from({ length: Math.min(5, pagination.pages) }, (_, i) => {\r\n              let pageNum: number;\r\n              if (pagination.pages <= 5) {\r\n                pageNum = i + 1;\r\n              } else if (pagination.page <= 3) {\r\n                pageNum = i + 1;\r\n              } else if (pagination.page >= pagination.pages - 2) {\r\n                pageNum = pagination.pages - 4 + i;\r\n              } else {\r\n                pageNum = pagination.page - 2 + i;\r\n              }\r\n\r\n              return (\r\n                <button\r\n                  key={pageNum}\r\n                  onClick={() => handlePageChange(pageNum)}\r\n                  className={`px-4 py-2 border rounded-md ${\r\n                    pagination.page === pageNum\r\n                      ? 'bg-blue-600 text-white border-blue-600'\r\n                      : 'border-gray-300 hover:bg-gray-50'\r\n                  }`}\r\n                >\r\n                  {pageNum}\r\n                </button>\r\n              );\r\n            })}\r\n\r\n            <button\r\n              onClick={() => handlePageChange(pagination.page + 1)}\r\n              disabled={pagination.page === pagination.pages}\r\n              className=\"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              Siguiente\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Product Card Component\r\ninterface ProductCardProps {\r\n  product: Product;\r\n  onAddToCart: (product: Product) => void;\r\n}\r\n\r\nconst ProductCard: React.FC<ProductCardProps> = ({ product, onAddToCart }) => {\r\n  const mainImage = productService.getMainImage(product);\r\n  const lowestPrice = productService.getLowestPrice(product);\r\n  const isAvailable = productService.isAvailable(product);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300 group\">\r\n      <Link to={`/products/${product.slug}`}>\r\n        <div className=\"relative aspect-square bg-gray-100\">\r\n          <LazyImage\r\n            src={mainImage}\r\n            alt={product.name}\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n\r\n          {/* Action Buttons - Show on hover */}\r\n          <div className=\"absolute top-2 left-2 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\r\n            <WishlistButton productId={product.id} variant=\"icon\" size=\"md\" />\r\n            <CompareButton product={product} variant=\"icon\" size=\"md\" />\r\n          </div>\r\n\r\n          {product.isFeatured && (\r\n            <div className=\"absolute top-2 right-2 bg-yellow-400 text-yellow-900 px-2 py-1 rounded-md text-xs font-semibold\">\r\n              ⭐ Destacado\r\n            </div>\r\n          )}\r\n          {!isAvailable && (\r\n            <div className=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\r\n              <span className=\"bg-red-600 text-white px-4 py-2 rounded-md font-semibold\">\r\n                Agotado\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Link>\r\n\r\n      <div className=\"p-4\">\r\n        <Link to={`/products/${product.slug}`}>\r\n          <h3 className=\"font-semibold text-lg text-gray-900 mb-2 hover:text-blue-600 transition-colors\">\r\n            {product.name}\r\n          </h3>\r\n        </Link>\r\n\r\n        <p className=\"text-sm text-gray-600 mb-3 line-clamp-2\">\r\n          {product.description || 'Carcasa de alta calidad para tu iPhone'}\r\n        </p>\r\n\r\n        {product.compatibility && (() => {\r\n          try {\r\n            const compatArray = typeof product.compatibility === 'string'\r\n              ? JSON.parse(product.compatibility)\r\n              : product.compatibility;\r\n\r\n            if (Array.isArray(compatArray) && compatArray.length > 0) {\r\n              return (\r\n                <div className=\"mb-3\">\r\n                  <div className=\"flex flex-wrap gap-1\">\r\n                    {compatArray.slice(0, 2).map(model => (\r\n                      <span\r\n                        key={model}\r\n                        className=\"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded\"\r\n                      >\r\n                        {model}\r\n                      </span>\r\n                    ))}\r\n                    {compatArray.length > 2 && (\r\n                      <span className=\"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded\">\r\n                        +{compatArray.length - 2}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              );\r\n            }\r\n          } catch (e) {\r\n            return null;\r\n          }\r\n          return null;\r\n        })()}\r\n\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <span className=\"text-2xl font-bold text-blue-600\">\r\n              ${lowestPrice.toFixed(2)}\r\n            </span>\r\n            {product.variants.length > 0 && (\r\n              <p className=\"text-xs text-gray-500\">\r\n                {product.variants.length} variantes\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <button\r\n            onClick={() => onAddToCart(product)}\r\n            disabled={!isAvailable}\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-sm font-medium\"\r\n          >\r\n            {isAvailable ? 'Agregar' : 'Agotado'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductsPage;\r\n","import React from 'react';\r\nimport { useCompare } from '../../context/CompareContext';\r\nimport { Product } from '../../services/productService';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface CompareButtonProps {\r\n  product: Product;\r\n  variant?: 'icon' | 'button';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  className?: string;\r\n}\r\n\r\nconst CompareButton: React.FC<CompareButtonProps> = ({\r\n  product,\r\n  variant = 'icon',\r\n  size = 'md',\r\n  className = ''\r\n}) => {\r\n  const { addToCompare, removeFromCompare, isInCompare, compareProducts } = useCompare();\r\n  const inCompare = isInCompare(product.id);\r\n\r\n  const handleToggleCompare = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    if (inCompare) {\r\n      removeFromCompare(product.id);\r\n      toast.success('Eliminado del comparador');\r\n    } else {\r\n      if (compareProducts.length >= 4) {\r\n        toast.error('Máximo 4 productos para comparar');\r\n        return;\r\n      }\r\n      addToCompare(product);\r\n      toast.success('Añadido al comparador');\r\n    }\r\n  };\r\n\r\n  const sizeClasses = {\r\n    sm: 'w-8 h-8',\r\n    md: 'w-10 h-10',\r\n    lg: 'w-12 h-12'\r\n  };\r\n\r\n  const iconSizes = {\r\n    sm: 'w-4 h-4',\r\n    md: 'w-5 h-5',\r\n    lg: 'w-6 h-6'\r\n  };\r\n\r\n  if (variant === 'icon') {\r\n    return (\r\n      <button\r\n        onClick={handleToggleCompare}\r\n        className={`${sizeClasses[size]} flex items-center justify-center rounded-full transition-all duration-300 ${\r\n          inCompare\r\n            ? 'bg-blue-500 text-white hover:bg-blue-600'\r\n            : 'bg-white text-gray-600 hover:bg-blue-50 hover:text-blue-500'\r\n        } hover:scale-110 shadow-md ${className}`}\r\n        aria-label={inCompare ? 'Eliminar del comparador' : 'Añadir al comparador'}\r\n      >\r\n        <svg className={iconSizes[size]} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"\r\n          />\r\n        </svg>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={handleToggleCompare}\r\n      className={`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 ${\r\n        inCompare\r\n          ? 'bg-blue-500 text-white hover:bg-blue-600'\r\n          : 'bg-gray-100 text-gray-700 hover:bg-blue-50 hover:text-blue-500'\r\n      } ${className}`}\r\n    >\r\n      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth={2}\r\n          d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"\r\n        />\r\n      </svg>\r\n      <span>{inCompare ? 'En comparador' : 'Comparar'}</span>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default CompareButton;\r\n","// frontend/src/services/wishlistService.ts\r\nimport axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\r\n\r\nexport interface WishlistItem {\r\n  id: string;\r\n  productId: string;\r\n  name: string;\r\n  slug: string;\r\n  basePrice: number;\r\n  lowestPrice: number;\r\n  image: string | null;\r\n  inStock: boolean;\r\n  isFeatured: boolean;\r\n  addedAt: string;\r\n}\r\n\r\nclass WishlistService {\r\n  // Get auth token\r\n  private getAuthToken(): string | null {\r\n    return localStorage.getItem('token');\r\n  }\r\n\r\n  // Get user's wishlist\r\n  async getWishlist(): Promise<WishlistItem[]> {\r\n    const token = this.getAuthToken();\r\n    if (!token) {\r\n      throw new Error('No autenticado');\r\n    }\r\n\r\n    const response = await axios.get(`${API_URL}/wishlist`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n\r\n    return response.data.wishlist;\r\n  }\r\n\r\n  // Add product to wishlist\r\n  async addToWishlist(productId: string): Promise<void> {\r\n    const token = this.getAuthToken();\r\n    if (!token) {\r\n      throw new Error('Debes iniciar sesión para añadir a favoritos');\r\n    }\r\n\r\n    await axios.post(\r\n      `${API_URL}/wishlist/add`,\r\n      { productId },\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  // Remove product from wishlist\r\n  async removeFromWishlist(productId: string): Promise<void> {\r\n    const token = this.getAuthToken();\r\n    if (!token) {\r\n      throw new Error('No autenticado');\r\n    }\r\n\r\n    await axios.delete(`${API_URL}/wishlist/${productId}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n  }\r\n\r\n  // Check if product is in wishlist\r\n  async checkInWishlist(productId: string): Promise<boolean> {\r\n    const token = this.getAuthToken();\r\n    if (!token) {\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.get(`${API_URL}/wishlist/check/${productId}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      return response.data.inWishlist;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Get wishlist count\r\n  async getWishlistCount(): Promise<number> {\r\n    const token = this.getAuthToken();\r\n    if (!token) {\r\n      return 0;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.get(`${API_URL}/wishlist/count`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      return response.data.count;\r\n    } catch (error) {\r\n      return 0;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new WishlistService();\r\n","import React, { useState, useEffect } from 'react';\r\nimport wishlistService from '../../services/wishlistService';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface WishlistButtonProps {\r\n  productId: string;\r\n  variant?: 'icon' | 'button';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  className?: string;\r\n}\r\n\r\nconst WishlistButton: React.FC<WishlistButtonProps> = ({\r\n  productId,\r\n  variant = 'icon',\r\n  size = 'md',\r\n  className = ''\r\n}) => {\r\n  const [inWishlist, setInWishlist] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [checking, setChecking] = useState(true);\r\n\r\n  // Check if product is in wishlist on mount\r\n  useEffect(() => {\r\n    const checkWishlist = async () => {\r\n      try {\r\n        const isInWishlist = await wishlistService.checkInWishlist(productId);\r\n        setInWishlist(isInWishlist);\r\n      } catch (error) {\r\n        // User not logged in, that's fine\r\n      } finally {\r\n        setChecking(false);\r\n      }\r\n    };\r\n\r\n    checkWishlist();\r\n  }, [productId]);\r\n\r\n  const handleToggleWishlist = async (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (inWishlist) {\r\n        await wishlistService.removeFromWishlist(productId);\r\n        setInWishlist(false);\r\n        toast.success('Eliminado de favoritos');\r\n      } else {\r\n        await wishlistService.addToWishlist(productId);\r\n        setInWishlist(true);\r\n        toast.success('Añadido a favoritos');\r\n      }\r\n    } catch (error: any) {\r\n      if (error.message.includes('autenticado') || error.message.includes('sesión')) {\r\n        toast.error('Debes iniciar sesión para añadir a favoritos');\r\n      } else {\r\n        toast.error(inWishlist ? 'Error al eliminar de favoritos' : 'Error al añadir a favoritos');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const sizeClasses = {\r\n    sm: 'w-8 h-8',\r\n    md: 'w-10 h-10',\r\n    lg: 'w-12 h-12'\r\n  };\r\n\r\n  const iconSizes = {\r\n    sm: 'w-4 h-4',\r\n    md: 'w-5 h-5',\r\n    lg: 'w-6 h-6'\r\n  };\r\n\r\n  if (checking) {\r\n    return null; // or a loading skeleton\r\n  }\r\n\r\n  if (variant === 'icon') {\r\n    return (\r\n      <button\r\n        onClick={handleToggleWishlist}\r\n        disabled={loading}\r\n        className={`${sizeClasses[size]} flex items-center justify-center rounded-full transition-all duration-300 ${\r\n          inWishlist\r\n            ? 'bg-red-500 text-white hover:bg-red-600'\r\n            : 'bg-white text-gray-600 hover:bg-red-50 hover:text-red-500'\r\n        } ${loading ? 'opacity-50 cursor-not-allowed' : 'hover:scale-110'} shadow-md ${className}`}\r\n        aria-label={inWishlist ? 'Eliminar de favoritos' : 'Añadir a favoritos'}\r\n      >\r\n        {loading ? (\r\n          <svg className={`${iconSizes[size]} animate-spin`} fill=\"none\" viewBox=\"0 0 24 24\">\r\n            <circle\r\n              className=\"opacity-25\"\r\n              cx=\"12\"\r\n              cy=\"12\"\r\n              r=\"10\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"4\"\r\n            />\r\n            <path\r\n              className=\"opacity-75\"\r\n              fill=\"currentColor\"\r\n              d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n            />\r\n          </svg>\r\n        ) : (\r\n          <svg\r\n            className={iconSizes[size]}\r\n            fill={inWishlist ? 'currentColor' : 'none'}\r\n            stroke=\"currentColor\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n            />\r\n          </svg>\r\n        )}\r\n      </button>\r\n    );\r\n  }\r\n\r\n  // Button variant\r\n  return (\r\n    <button\r\n      onClick={handleToggleWishlist}\r\n      disabled={loading}\r\n      className={`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 ${\r\n        inWishlist\r\n          ? 'bg-red-500 text-white hover:bg-red-600'\r\n          : 'bg-gray-100 text-gray-700 hover:bg-red-50 hover:text-red-500'\r\n      } ${loading ? 'opacity-50 cursor-not-allowed' : ''} ${className}`}\r\n    >\r\n      <svg\r\n        className=\"w-5 h-5\"\r\n        fill={inWishlist ? 'currentColor' : 'none'}\r\n        stroke=\"currentColor\"\r\n        viewBox=\"0 0 24 24\"\r\n      >\r\n        <path\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth={2}\r\n          d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n        />\r\n      </svg>\r\n      <span>{inWishlist ? 'En favoritos' : 'Añadir a favoritos'}</span>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default WishlistButton;\r\n"],"names":["_ref","src","alt","className","placeholder","onLoad","onError","imageSrc","setImageSrc","useState","isLoading","setIsLoading","isError","setIsError","imgRef","useRef","useEffect","observer","imgElement","current","IntersectionObserver","entries","forEach","entry","isIntersecting","img","Image","onload","onerror","unobserve","rootMargin","threshold","observe","_jsxs","concat","children","_jsx","ref","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","filters","onFilterChange","availableCategories","isExpanded","setIsExpanded","localFilters","setLocalFilters","handleApplyFilters","type","value","search","onChange","e","_objectSpread","target","onKeyPress","key","onClick","min","priceMin","Number","priceMax","map","rating","name","checked","Array","_","i","category","categories","includes","id","categoryId","newCategories","filter","toggleCategory","sortBy","sortOrder","handleReset","resetFilters","ProductCard","product","onAddToCart","mainImage","productService","getMainImage","lowestPrice","getLowestPrice","isAvailable","Link","to","slug","LazyImage","WishlistButton","productId","variant","size","CompareButton","isFeatured","description","compatibility","compatArray","JSON","parse","isArray","length","slice","model","toFixed","variants","disabled","ProductsPage","_searchParams$get","searchParams","setSearchParams","useSearchParams","addItem","useCart","products","setProducts","loading","setLoading","setCategories","pagination","setPagination","page","limit","total","pages","setFilters","get","split","async","cats","getCategories","error","console","loadCategories","loadProducts","useCallback","_response$pagination","_response$pagination2","_response$pagination3","_response$pagination4","parseInt","response","getProducts","undefined","data","toast","handleVisibilityChange","document","visibilityState","addEventListener","removeEventListener","handlePageChange","newPage","params","URLSearchParams","set","toString","window","scrollTo","handleAddToCart","_product$variants$","_product$variants$2","replace","price","color","quantity","image","sku","maxQuantity","stockCount","AdvancedFilters","newFilters","join","from","Math","pageNum","addToCompare","removeFromCompare","isInCompare","compareProducts","useCompare","inCompare","handleToggleCompare","preventDefault","stopPropagation","success","sizeClasses","sm","md","lg","iconSizes","API_URL","process","getAuthToken","localStorage","getItem","getWishlist","token","this","Error","axios","headers","Authorization","wishlist","addToWishlist","post","removeFromWishlist","delete","checkInWishlist","inWishlist","getWishlistCount","count","setInWishlist","checking","setChecking","isInWishlist","wishlistService","checkWishlist","handleToggleWishlist","message","cx","cy","r"],"sourceRoot":""}